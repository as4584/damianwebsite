module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},49946,(a,b,c)=>{"use strict";b.exports=a.r(22842).vendored.contexts.HooksClientContext},15323,(a,b,c)=>{"use strict";b.exports=a.r(22842).vendored.contexts.ServerInsertedHtml},66905,a=>{"use strict";var b=a.i(53055),c=a.i(80568);let d={hot:{emoji:"üî•",label:"Hot Lead",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-700"},warm:{emoji:"üü°",label:"Warm Lead",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-700"},cold:{emoji:"‚ö™",label:"Cold Lead",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-600"}},e={sm:"text-sm px-2 py-0.5",md:"text-base px-3 py-1",lg:"text-lg px-4 py-2"};function f({hotness:a,factors:f,size:g="md"}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)("bottom"),l=(0,c.useRef)(null),m=(0,c.useRef)(null),n=d[a];(0,c.useEffect)(()=>{if(h&&l.current){let a=l.current.getBoundingClientRect();k(window.innerHeight-a.bottom<200?"top":"bottom")}},[h]),(0,c.useEffect)(()=>{let a=a=>{m.current&&!m.current.contains(a.target)&&l.current&&!l.current.contains(a.target)&&i(!1)};if(h)return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[h]);let o=function(a,b){let c=b.filter(a=>a.present),d={hot:"This person is highly engaged and showing strong buying signals. They are ready to take action and should be contacted promptly.",warm:"This person is interested and exploring their options. They need a bit more information or nurturing before committing.",cold:"This person is in early research mode or may not be a strong fit. They haven't shown strong buying signals yet."}[a];if(c.length>0){let a=c.map(a=>a.name||a.description).join(", ");d+=` We noticed: ${a}.`}return d}(a,f);return(0,b.jsxs)("div",{className:"relative inline-block",children:[(0,b.jsxs)("button",{ref:l,onClick:()=>i(!h),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:`
          inline-flex items-center gap-1.5 rounded-full border
          ${n.bgColor} ${n.borderColor} ${n.textColor}
          ${e[g]}
          cursor-help transition-all hover:shadow-sm
        `,"aria-label":`${n.label}: Click for details`,children:[(0,b.jsx)("span",{role:"img","aria-hidden":"true",children:n.emoji}),(0,b.jsx)("span",{className:"font-medium",children:n.label})]}),h&&(0,b.jsxs)("div",{ref:m,className:`
            absolute z-50 w-72 p-4 bg-white rounded-lg shadow-lg border border-gray-200
            ${"bottom"===j?"top-full mt-2":"bottom-full mb-2"}
            left-0
          `,role:"tooltip",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-xl",children:n.emoji}),(0,b.jsx)("span",{className:`font-semibold ${n.textColor}`,children:n.label})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:o}),f.filter(a=>a.present).length>0&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"What we noticed:"}),(0,b.jsx)("ul",{className:"space-y-1",children:f.filter(a=>a.present).map((a,c)=>(0,b.jsxs)("li",{className:"text-xs text-gray-600 flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"text-green-500",children:"‚úì"}),a.name]},c))})]}),(0,b.jsx)("div",{className:`
              absolute w-3 h-3 bg-white border-gray-200 transform rotate-45
              ${"bottom"===j?"-top-1.5 left-6 border-l border-t":"-bottom-1.5 left-6 border-r border-b"}
            `})]})]})}function g({hotness:a}){let c=d[a];return(0,b.jsx)("span",{className:`
        inline-flex items-center gap-1 text-xs font-medium rounded-full px-2 py-0.5
        ${c.bgColor} ${c.borderColor} ${c.textColor} border
      `,title:c.label,children:(0,b.jsx)("span",{role:"img","aria-hidden":"true",children:c.emoji})})}a.s(["HotnessBadge",()=>g,"HotnessIndicator",()=>f],66905)},70125,a=>{"use strict";var b=a.i(53055),c=a.i(80568),d=a.i(44389),e=a.i(79100),f=a.i(52401),g=a.i(66905);let h={sales:"üíº Sales Inquiry",booking:"üìÖ Wants to Book",question:"‚ùì Has Questions",support:"üÜò Needs Support",unknown:"üí≠ Exploring"};function i({lead:a,isSelected:c,onClick:d}){var e;let i,j,k,l,m,n=a.fullName||"Anonymous Visitor",o=h[a.intent];return(0,b.jsx)(f.default,{href:`/dashboard/leads/${a.id}`,className:`
        block p-5 border-b border-white/20 backdrop-blur-xl bg-white/80 hover:bg-white/90 transition-all duration-300 hover:shadow-lg hover:shadow-blue-100/50
        ${c?"bg-gradient-to-r from-blue-50/80 to-purple-50/80 border-l-4 border-l-blue-500 shadow-lg shadow-blue-200/50":""}
        ${a.hasUnreadActivity?"bg-gradient-to-r from-blue-50/60 to-indigo-50/60":""}
        rounded-xl mb-2
      `,onClick:d,children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.hasUnreadActivity&&(0,b.jsx)("span",{className:"w-2.5 h-2.5 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex-shrink-0 animate-pulse shadow-lg shadow-blue-400/50",title:"New activity"}),(0,b.jsx)("span",{className:"font-bold text-gray-900 truncate text-lg",children:n})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2 font-medium",children:[(0,b.jsx)("span",{children:o}),(0,b.jsx)("span",{className:"text-gray-300",children:"‚Ä¢"}),(0,b.jsxs)("span",{children:["from ",a.sourcePage]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[(0,b.jsx)(g.HotnessBadge,{hotness:a.hotness}),(0,b.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:(i="string"==typeof(e=a.createdAt)?new Date(e):e,k=Math.floor((j=new Date().getTime()-i.getTime())/6e4),l=Math.floor(j/36e5),m=Math.floor(j/864e5),k<1?"Just now":k<60?`${k}m ago`:l<24?`${l}h ago`:1===m?"Yesterday":m<7?`${m}d ago`:i.toLocaleDateString("en-US",{month:"short",day:"numeric"}))})]})]})})}function j({leads:a,selectedLeadId:c,filter:d="all",onFilterChange:e,isLoading:f}){let g="all"===d?a:a.filter(a=>a.hotness===d);return f?(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4 animate-pulse"})}),[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"p-4 border-b border-gray-100 animate-pulse",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},a))]}):(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 p-2 border-b border-gray-100 bg-gray-50",children:[{value:"all",label:"All",emoji:"üìã"},{value:"hot",label:"Hot",emoji:"üî•"},{value:"warm",label:"Warm",emoji:"üü°"},{value:"cold",label:"Cold",emoji:"‚ö™"}].map(c=>(0,b.jsxs)("button",{onClick:()=>e?.(c.value),className:`
              flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors
              ${d===c.value?"bg-white shadow-sm text-gray-900":"text-gray-500 hover:text-gray-700 hover:bg-white/50"}
            `,children:[(0,b.jsx)("span",{children:c.emoji}),(0,b.jsx)("span",{children:c.label}),"all"!==c.value&&(0,b.jsxs)("span",{className:"text-xs text-gray-400 ml-1",children:["(",a.filter(a=>a.hotness===c.value).length,")"]})]},c.value))}),(0,b.jsx)("div",{className:"divide-y divide-gray-100 max-h-[600px] overflow-y-auto",children:0===g.length?(0,b.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,b.jsx)("span",{className:"text-4xl mb-2 block",children:"üì≠"}),(0,b.jsx)("p",{children:"No leads found"})]}):g.map(a=>(0,b.jsx)(i,{lead:a,isSelected:a.id===c},a.id))})]})}function k(){let[a,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(!0),[g,h]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=!1;return async function(){f(!0),h(null);try{let b=await fetch("/dashboard/api/analytics"),c=await b.json();if(!b.ok||!c?.success)throw Error(c?.error||`Request failed (${b.status})`);a||d(c.data)}catch(b){a||h(b instanceof Error?b.message:"Failed to load analytics")}finally{a||f(!1)}}(),()=>{a=!0}},[]);let i=(0,c.useMemo)(()=>{let b=a?.leadsPerDay||[],c=Math.max(...b.map(a=>a.value),1),d=b.length||7;return{width:560,height:140,paddingX:20,paddingY:20,barWidth:Math.max(14,Math.floor((520-10*(d-1))/d)),barGap:10,max:c,points:b}},[a]);return(0,b.jsxs)("section",{className:"mt-10","data-testid":"analytics-section",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,b.jsx)("h2",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Analytics"})}),e&&(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/70 rounded-2xl border border-white/20 shadow-lg shadow-blue-100/50 p-6",children:[(0,b.jsx)("p",{className:"text-gray-600 font-medium loading",children:"Loading analytics‚Ä¶"}),(0,b.jsx)("div",{"data-testid":"total-leads",className:"hidden",children:(0,b.jsx)("span",{"data-testid":"total-leads-value",children:"0"})})]}),!e&&g&&(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/70 rounded-2xl border border-red-200 shadow-lg p-6",children:[(0,b.jsx)("p",{className:"text-red-600 font-semibold",children:"Failed to load analytics"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:g}),(0,b.jsx)("div",{"data-testid":"total-leads",className:"hidden",children:(0,b.jsx)("span",{"data-testid":"total-leads-value",children:"0"})})]}),!e&&!g&&a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/80 rounded-2xl shadow-xl shadow-blue-100/50 border border-white/20 p-6","data-testid":"total-leads",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-2",children:"Total Leads"}),(0,b.jsx)("div",{className:"text-3xl font-bold text-gray-900","data-testid":"total-leads-value",children:a.totalLeads})]}),(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/80 rounded-2xl shadow-xl shadow-blue-100/50 border border-white/20 p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-2",children:"Hot"}),(0,b.jsx)("div",{className:"text-3xl font-bold text-red-600",children:a.hotWarmCold.hot})]}),(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/80 rounded-2xl shadow-xl shadow-blue-100/50 border border-white/20 p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-2",children:"Warm"}),(0,b.jsx)("div",{className:"text-3xl font-bold text-amber-600",children:a.hotWarmCold.warm})]}),(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/80 rounded-2xl shadow-xl shadow-blue-100/50 border border-white/20 p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-2",children:"Cold"}),(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-600",children:a.hotWarmCold.cold})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 backdrop-blur-xl bg-white/80 rounded-2xl shadow-xl shadow-blue-100/50 border border-white/20 p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-4",children:"Leads per day (last 7 days)"}),(0,b.jsxs)("svg",{"data-testid":"leads-chart",className:"chart",width:i.width,height:i.height,viewBox:`0 0 ${i.width} ${i.height}`,role:"img","aria-label":"Leads per day chart",children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"barGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.9"}),(0,b.jsx)("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:"0.8"})]})}),i.points.map((a,c)=>{let d=i.paddingX+c*(i.barWidth+i.barGap),e=i.height-2*i.paddingY,f=Math.round(a.value/i.max*e),g=i.height-i.paddingY-f;return(0,b.jsx)("g",{children:(0,b.jsx)("rect",{x:d,y:g,width:i.barWidth,height:f,rx:6,fill:"url(#barGrad)"})},a.date)})]})]}),(0,b.jsxs)("div",{className:"backdrop-blur-xl bg-white/80 rounded-2xl shadow-xl shadow-blue-100/50 border border-white/20 p-6",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600 font-medium mb-2",children:"Conversion Rate"}),(0,b.jsxs)("div",{className:"text-3xl font-bold text-gray-900",children:[a.conversionRate,"%"]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500 mt-2",children:[a.leadsWithContact,"/",a.totalLeads," leads include contact info"]})]})]})]})]})}function l(){let a=(0,e.useRouter)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(null),[l,m]=(0,c.useState)("all"),[n,o]=(0,c.useState)(!0);(0,c.useEffect)(()=>{!async function(){try{let[a,b]=await Promise.all([fetch("/dashboard/api/leads?view=preview").then(a=>a.json()),fetch("/dashboard/api/metrics?type=counts").then(a=>a.json())]);a.success&&g(a.data),b.success&&i(b.data)}catch(a){console.error("Failed to load dashboard:",a)}finally{o(!1)}}()},[]);let p=async()=>{await (0,d.signOut)({redirect:!1}),a.push("/")};return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,b.jsx)("header",{className:"backdrop-blur-xl bg-white/70 border-b border-white/20 shadow-lg shadow-blue-100/50",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Innovation Business Development Solutions"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Leads Dashboard"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("a",{href:"https://innovationdevelopmentsolutions.com",className:"px-5 py-2.5 bg-white/80 text-gray-800 font-medium rounded-xl shadow-lg shadow-blue-100/40 hover:shadow-xl hover:shadow-blue-200/50 transition-all duration-300 border border-white/20",children:"Back to Homepage"}),(0,b.jsx)("button",{onClick:p,className:"px-6 py-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white font-medium rounded-xl shadow-lg shadow-red-200/50 hover:shadow-xl hover:shadow-red-300/50 transition-all duration-300 hover:scale-105",children:"Logout"})]})]})})}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)(k,{}),(0,b.jsxs)("section",{className:"mt-10",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,b.jsxs)("h2",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:["Recent Leads",h&&(0,b.jsxs)("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",h.total," total)"]})]})}),(0,b.jsx)(j,{leads:f,filter:l,onFilterChange:m,isLoading:n})]})]}),(0,b.jsx)("footer",{className:"backdrop-blur-xl bg-white/70 border-t border-white/20 shadow-lg shadow-blue-100/50 mt-8",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["¬© ",new Date().getFullYear()," Innovation Business Development Solutions. All rights reserved."]})})})]})}a.s(["default",()=>l],70125)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0155b01b._.js.map