{"version":3,"sources":["../../../../../../damianwebsite/frontend/app/dashboard/leads/%5BleadId%5D/page.tsx","../../../../../../damianwebsite/frontend/app/dashboard/components/LeadDetail.tsx","../../../../../../damianwebsite/frontend/app/dashboard/utils/actionSuggestion.ts","../../../../../../damianwebsite/frontend/app/dashboard/components/SuggestedAction.tsx","../../../../../../damianwebsite/frontend/app/dashboard/utils/intentExtraction.ts"],"sourcesContent":["'use client';\n\n/**\n * Lead Detail Page\n * Full view for a single lead\n * \n * SECURITY:\n * - Uses API routes instead of direct service calls\n * - Session validation happens on server (middleware + API routes)\n * - businessId scoping enforced by backend\n */\n\nimport React, { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useParams, useRouter } from 'next/navigation';\nimport { LeadDetail } from '../../components/LeadDetail';\nimport { Lead } from '../../types';\n\nexport default function LeadDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const leadId = params.leadId as string;\n  \n  const [lead, setLead] = useState<Lead | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  useEffect(() => {\n    async function loadLead() {\n      try {\n        // SECURITY: Call API route (not direct service call)\n        // API validates session and businessId ownership\n        const response = await fetch(`/dashboard/api/leads/${leadId}`);\n        const result = await response.json();\n        \n        if (result.success && result.data) {\n          setLead(result.data);\n        } else {\n          setError(result.error || 'Lead not found');\n        }\n      } catch (err) {\n        setError('Failed to load lead');\n      } finally {\n        setIsLoading(false);\n      }\n    }\n    \n    if (leadId) {\n      loadLead();\n    }\n  }, [leadId]);\n  \n  const handleUpdateNotes = async (notes: string) => {\n    if (!lead) return;\n    \n    // SECURITY: Call API route (not direct service call)\n    const response = await fetch(`/dashboard/api/leads/${lead.id}`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ internalNotes: notes })\n    });\n    \n    const result = await response.json();\n    if (result.success && result.data) {\n      setLead(result.data);\n    }\n  };\n  \n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <header className=\"bg-white border-b border-gray-200\">\n          <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n            <div className=\"h-8 bg-gray-200 rounded w-1/4 animate-pulse\" />\n          </div>\n        </header>\n        <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-8\">\n            <div className=\"space-y-4 animate-pulse\">\n              <div className=\"h-8 bg-gray-200 rounded w-1/2\" />\n              <div className=\"h-4 bg-gray-200 rounded w-3/4\" />\n              <div className=\"h-4 bg-gray-200 rounded w-2/3\" />\n            </div>\n          </div>\n        </main>\n      </div>\n    );\n  }\n  \n  if (error || !lead) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <span className=\"text-6xl mb-4 block\">üòï</span>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            Lead Not Found\n          </h1>\n          <p className=\"text-gray-600 mb-6\">{error || 'This lead does not exist'}</p>\n          <Link\n            href=\"/dashboard\"\n            className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white\n              rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            ‚Üê Back to Dashboard\n          </Link>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <nav className=\"flex items-center gap-4\">\n            <Link\n              href=\"/dashboard\"\n              className=\"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900\n                transition-colors\"\n            >\n              <span>‚Üê</span>\n              <span>Back to Dashboard</span>\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <span className=\"text-gray-500\">Lead Details</span>\n          </nav>\n        </div>\n      </header>\n      \n      {/* Main Content */}\n      <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <LeadDetail \n          lead={lead}\n          onUpdateNotes={handleUpdateNotes}\n        />\n      </main>\n      \n      {/* Footer */}\n      <footer className=\"border-t border-gray-200 bg-white mt-auto\">\n        <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <p className=\"text-sm text-gray-500 text-center\">\n            Innovation Development Solutions ‚Äî Leads Dashboard\n          </p>\n        </div>\n      </footer>\n    </div>\n  );\n}\n","'use client';\n\n/**\n * LeadDetail Component\n * Full view of a single lead with all information\n */\n\nimport React, { useState } from 'react';\nimport { Lead, ConversationMessage } from '../types';\nimport { HotnessIndicator } from './HotnessIndicator';\nimport { SuggestedActionCard, QuickActions } from './SuggestedAction';\nimport { summarizeConversation } from '../utils/intentExtraction';\n\ninterface LeadDetailProps {\n  lead: Lead;\n  onUpdateNotes?: (notes: string) => void;\n}\n\nfunction formatTime(date: Date): string {\n  return date.toLocaleTimeString('en-US', { \n    hour: 'numeric', \n    minute: '2-digit',\n    hour12: true \n  });\n}\n\nfunction formatDate(date: Date): string {\n  return date.toLocaleDateString('en-US', { \n    weekday: 'long',\n    month: 'long', \n    day: 'numeric',\n    year: 'numeric'\n  });\n}\n\n/**\n * Conversation View\n */\nfunction ConversationView({ messages }: { messages: ConversationMessage[] }) {\n  return (\n    <div className=\"space-y-4\">\n      {messages.map((message, index) => (\n        <div\n          key={index}\n          className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n        >\n          <div\n            className={`\n              max-w-[80%] rounded-2xl px-4 py-3\n              ${message.role === 'user' \n                ? 'bg-blue-600 text-white rounded-br-md' \n                : 'bg-gray-100 text-gray-900 rounded-bl-md'\n              }\n            `}\n          >\n            <p className=\"text-sm\">{message.content}</p>\n            \n            {message.highlights && message.highlights.length > 0 && (\n              <div className=\"mt-2 pt-2 border-t border-blue-500/30\">\n                <div className=\"flex flex-wrap gap-1\">\n                  {message.highlights.map((highlight, i) => (\n                    <span \n                      key={i}\n                      className=\"text-xs bg-blue-500/20 px-2 py-0.5 rounded\"\n                    >\n                      {highlight}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            <p className={`text-xs mt-1 ${message.role === 'user' ? 'text-blue-200' : 'text-gray-400'}`}>\n              {formatTime(message.timestamp)}\n            </p>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n/**\n * Extracted Info Panel\n */\nfunction ExtractedInfoPanel({ info }: { info: Lead['extractedInfo'] }) {\n  const entries = Object.entries(info).filter(([_, value]) => value);\n  \n  if (entries.length === 0) {\n    return (\n      <p className=\"text-sm text-gray-500 italic\">\n        No key information extracted yet\n      </p>\n    );\n  }\n  \n  return (\n    <div className=\"grid grid-cols-2 gap-3\">\n      {entries.map(([key, value]) => (\n        <div key={key} className=\"bg-gray-50 rounded-lg p-3\">\n          <p className=\"text-xs text-gray-500 mb-1\">\n            {key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n          </p>\n          <p className=\"text-sm font-medium text-gray-900\">{value}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n/**\n * Internal Notes Section\n */\nfunction InternalNotes({ \n  notes, \n  onUpdate \n}: { \n  notes: string; \n  onUpdate?: (notes: string) => void;\n}) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(notes);\n  \n  const handleSave = () => {\n    onUpdate?.(editValue);\n    setIsEditing(false);\n  };\n  \n  if (isEditing) {\n    return (\n      <div className=\"space-y-2\">\n        <textarea\n          value={editValue}\n          onChange={(e) => setEditValue(e.target.value)}\n          className=\"w-full h-32 p-3 text-sm border border-gray-300 rounded-lg\n            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\n            resize-none\"\n          placeholder=\"Add internal notes about this lead...\"\n          autoFocus\n        />\n        <div className=\"flex justify-end gap-2\">\n          <button\n            onClick={() => setIsEditing(false)}\n            className=\"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            className=\"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg\n              hover:bg-blue-700 transition-colors\"\n          >\n            Save Notes\n          </button>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div \n      onClick={() => setIsEditing(true)}\n      className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg cursor-pointer\n        hover:border-yellow-300 transition-colors min-h-[80px]\"\n    >\n      {notes ? (\n        <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">{notes}</p>\n      ) : (\n        <p className=\"text-sm text-gray-400 italic\">\n          Click to add internal notes...\n        </p>\n      )}\n    </div>\n  );\n}\n\n/**\n * Main Lead Detail Component\n */\nexport function LeadDetail({ lead, onUpdateNotes }: LeadDetailProps) {\n  const summary = summarizeConversation(lead.conversation);\n  \n  return (\n    <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\n      {/* Header */}\n      <div className=\"p-6 border-b border-gray-100\">\n        <div className=\"flex items-start justify-between gap-4 mb-4\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-1\">\n              {lead.fullName || 'Anonymous Visitor'}\n            </h1>\n            <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n              {lead.email && (\n                <span className=\"flex items-center gap-1\">\n                  ‚úâÔ∏è {lead.email}\n                </span>\n              )}\n              {lead.phone && (\n                <span className=\"flex items-center gap-1\">\n                  üìû {lead.phone}\n                </span>\n              )}\n            </div>\n          </div>\n          <HotnessIndicator \n            hotness={lead.hotness} \n            factors={lead.hotnessFactors}\n            size=\"lg\"\n          />\n        </div>\n        \n        <QuickActions \n          leadId={lead.id}\n          leadPhone={lead.phone}\n          leadEmail={lead.email}\n        />\n      </div>\n      \n      {/* AI Suggested Action */}\n      <div className=\"p-6 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-blue-50\">\n        <h2 className=\"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2\">\n          <span>ü§ñ</span>\n          <span>AI Suggested Next Step</span>\n        </h2>\n        <SuggestedActionCard action={lead.suggestedAction} />\n      </div>\n      \n      {/* Summary */}\n      <div className=\"p-6 border-b border-gray-100\">\n        <h2 className=\"text-sm font-semibold text-gray-700 mb-3\">Quick Summary</h2>\n        <p className=\"text-gray-600 leading-relaxed\">{summary}</p>\n      </div>\n      \n      <div className=\"grid grid-cols-1 lg:grid-cols-2\">\n        {/* Conversation */}\n        <div className=\"p-6 border-b lg:border-b-0 lg:border-r border-gray-100\">\n          <h2 className=\"text-sm font-semibold text-gray-700 mb-4 flex items-center justify-between\">\n            <span>Conversation</span>\n            <span className=\"text-xs text-gray-400 font-normal\">\n              {formatDate(lead.createdAt)}\n            </span>\n          </h2>\n          <div className=\"max-h-[400px] overflow-y-auto pr-2\">\n            <ConversationView messages={lead.conversation} />\n          </div>\n        </div>\n        \n        {/* Right Side Info */}\n        <div className=\"p-6 space-y-6\">\n          {/* Extracted Info */}\n          <div>\n            <h2 className=\"text-sm font-semibold text-gray-700 mb-3\">Key Information</h2>\n            <ExtractedInfoPanel info={lead.extractedInfo} />\n          </div>\n          \n          {/* Source */}\n          <div>\n            <h2 className=\"text-sm font-semibold text-gray-700 mb-3\">Source</h2>\n            <div className=\"bg-gray-50 rounded-lg p-3 space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-gray-500\">Page</span>\n                <span className=\"text-gray-900 font-medium\">{lead.source.page}</span>\n              </div>\n              {lead.source.referrer && (\n                <div className=\"flex justify-between text-sm\">\n                  <span className=\"text-gray-500\">Referrer</span>\n                  <span className=\"text-gray-900\">{lead.source.referrer}</span>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Internal Notes */}\n          <div>\n            <h2 className=\"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2\">\n              üìù Internal Notes\n            </h2>\n            <InternalNotes \n              notes={lead.internalNotes} \n              onUpdate={onUpdateNotes}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default LeadDetail;\n","/**\n * Action Suggestion Utility\n * AI-assisted next action recommendations for leads\n */\n\nimport { Lead, LeadHotness, LeadIntent, SuggestedAction } from '../types';\n\n/**\n * Get action priority based on lead hotness\n */\nexport function getActionPriority(hotness: LeadHotness): 'high' | 'medium' | 'low' {\n  switch (hotness) {\n    case 'hot':\n      return 'high';\n    case 'warm':\n      return 'medium';\n    case 'cold':\n      return 'low';\n  }\n}\n\n/**\n * Suggest the best next action for a lead\n */\nexport function suggestNextAction(lead: Lead): SuggestedAction {\n  const priority = getActionPriority(lead.hotness);\n  \n  // Hot leads - prioritize immediate contact\n  if (lead.hotness === 'hot') {\n    if (lead.phone) {\n      return {\n        type: 'call',\n        label: 'Call this lead now',\n        reason: 'This is a hot lead showing strong buying signals. They have provided a phone number and are likely ready to move forward. A quick call can help close the deal.',\n        priority: 'high'\n      };\n    }\n    \n    if (lead.email) {\n      return {\n        type: 'email',\n        label: 'Send a personal email',\n        reason: 'This hot lead hasn\\'t provided a phone number, but they\\'re highly engaged. Send a personal email with clear next steps to keep their momentum.',\n        priority: 'high'\n      };\n    }\n  }\n\n  // Booking intent - suggest scheduling\n  if (lead.intent === 'booking') {\n    return {\n      type: 'schedule',\n      label: 'Confirm their appointment',\n      reason: 'This person specifically asked about scheduling. Reach out to confirm the best time for a consultation.',\n      priority\n    };\n  }\n\n  // Warm leads - nurture with follow-up\n  if (lead.hotness === 'warm') {\n    if (lead.intent === 'question') {\n      return {\n        type: 'email',\n        label: 'Answer their questions',\n        reason: 'This person has questions that weren\\'t fully answered in the chat. Send a detailed response to build trust and move them closer to a decision.',\n        priority: 'medium'\n      };\n    }\n    \n    return {\n      type: 'follow_up',\n      label: 'Send a follow-up',\n      reason: 'This warm lead is interested but needs more nurturing. Send a friendly follow-up with helpful information to keep them engaged.',\n      priority: 'medium'\n    };\n  }\n\n  // Support intent - needs attention\n  if (lead.intent === 'support') {\n    return {\n      type: 'call',\n      label: 'Resolve their issue',\n      reason: 'This person has an issue that needs attention. Contact them to understand and resolve their concern quickly.',\n      priority: lead.hotness === 'hot' ? 'high' : 'medium'\n    };\n  }\n\n  // Cold leads with contact info\n  if (lead.hotness === 'cold' && (lead.email || lead.phone)) {\n    return {\n      type: 'email',\n      label: 'Add to nurture sequence',\n      reason: 'This lead isn\\'t ready to buy yet, but they left contact info. Add them to your email list and check back in a few weeks.',\n      priority: 'low'\n    };\n  }\n\n  // Unknown intent or cold lead without contact\n  if (lead.hotness === 'cold' && !lead.email && !lead.phone) {\n    return {\n      type: 'archive',\n      label: 'Archive for now',\n      reason: 'This visitor didn\\'t engage deeply or leave contact information. Archive and focus on more promising leads.',\n      priority: 'low'\n    };\n  }\n\n  // Default fallback\n  return {\n    type: 'wait',\n    label: 'Monitor for activity',\n    reason: 'Not enough information to suggest a specific action. Wait for more engagement before reaching out.',\n    priority: 'low'\n  };\n}\n\n/**\n * Get action icon based on type\n */\nexport function getActionIcon(type: SuggestedAction['type']): string {\n  switch (type) {\n    case 'call':\n      return 'üìû';\n    case 'email':\n      return '‚úâÔ∏è';\n    case 'schedule':\n      return 'üìÖ';\n    case 'follow_up':\n      return 'üí¨';\n    case 'wait':\n      return '‚è≥';\n    case 'archive':\n      return 'üìÅ';\n  }\n}\n\n/**\n * Get priority badge color\n */\nexport function getPriorityColor(priority: SuggestedAction['priority']): string {\n  switch (priority) {\n    case 'high':\n      return 'text-red-600 bg-red-50 border-red-200';\n    case 'medium':\n      return 'text-amber-600 bg-amber-50 border-amber-200';\n    case 'low':\n      return 'text-slate-600 bg-slate-50 border-slate-200';\n  }\n}\n","'use client';\n\n/**\n * SuggestedAction Component\n * AI-recommended next action for a lead\n */\n\nimport React from 'react';\nimport { SuggestedAction as SuggestedActionType } from '../types';\nimport { getActionIcon, getPriorityColor } from '../utils/actionSuggestion';\n\ninterface SuggestedActionProps {\n  action: SuggestedActionType;\n  onAction?: () => void;\n  compact?: boolean;\n}\n\nconst priorityStyles = {\n  high: {\n    bg: 'bg-red-50',\n    border: 'border-red-200',\n    badge: 'bg-red-100 text-red-700',\n    button: 'bg-red-600 hover:bg-red-700 text-white'\n  },\n  medium: {\n    bg: 'bg-yellow-50',\n    border: 'border-yellow-200',\n    badge: 'bg-yellow-100 text-yellow-700',\n    button: 'bg-yellow-600 hover:bg-yellow-700 text-white'\n  },\n  low: {\n    bg: 'bg-gray-50',\n    border: 'border-gray-200',\n    badge: 'bg-gray-100 text-gray-700',\n    button: 'bg-gray-600 hover:bg-gray-700 text-white'\n  }\n};\n\nexport function SuggestedActionCard({ action, onAction, compact = false }: SuggestedActionProps) {\n  const styles = priorityStyles[action.priority];\n  const icon = getActionIcon(action.type);\n  \n  if (compact) {\n    return (\n      <div className={`flex items-center gap-2 px-3 py-2 rounded-lg ${styles.bg} border ${styles.border}`}>\n        <span className=\"text-lg\">{icon}</span>\n        <span className=\"text-sm font-medium text-gray-700\">{action.label}</span>\n      </div>\n    );\n  }\n  \n  return (\n    <div className={`rounded-xl ${styles.bg} border ${styles.border} p-4`}>\n      <div className=\"flex items-start justify-between gap-4\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-2xl\">{icon}</span>\n            <span className={`text-xs font-medium px-2 py-0.5 rounded-full ${styles.badge}`}>\n              {action.priority.toUpperCase()} PRIORITY\n            </span>\n          </div>\n          \n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n            {action.label}\n          </h3>\n          \n          <p className=\"text-sm text-gray-600 leading-relaxed\">\n            {action.reason}\n          </p>\n        </div>\n        \n        {onAction && (\n          <button\n            onClick={onAction}\n            className={`\n              flex-shrink-0 px-4 py-2 rounded-lg font-medium text-sm\n              transition-colors ${styles.button}\n            `}\n          >\n            Take Action\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/**\n * Quick Actions Panel\n * Common actions for lead management\n */\n\ninterface QuickActionsProps {\n  leadId: string;\n  leadPhone?: string | null;\n  leadEmail?: string | null;\n}\n\nexport function QuickActions({ leadId, leadPhone, leadEmail }: QuickActionsProps) {\n  const handleCall = () => {\n    if (leadPhone) {\n      window.location.href = `tel:${leadPhone}`;\n    }\n  };\n  \n  const handleEmail = () => {\n    if (leadEmail) {\n      window.location.href = `mailto:${leadEmail}`;\n    }\n  };\n  \n  return (\n    <div className=\"flex flex-wrap gap-2\">\n      <button\n        onClick={handleCall}\n        disabled={!leadPhone}\n        className={`\n          inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium\n          transition-colors\n          ${leadPhone \n            ? 'bg-green-100 text-green-700 hover:bg-green-200' \n            : 'bg-gray-100 text-gray-400 cursor-not-allowed'\n          }\n        `}\n        title={leadPhone ? `Call ${leadPhone}` : 'No phone number available'}\n      >\n        üìû Call\n      </button>\n      \n      <button\n        onClick={handleEmail}\n        disabled={!leadEmail}\n        className={`\n          inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium\n          transition-colors\n          ${leadEmail \n            ? 'bg-blue-100 text-blue-700 hover:bg-blue-200' \n            : 'bg-gray-100 text-gray-400 cursor-not-allowed'\n          }\n        `}\n        title={leadEmail ? `Email ${leadEmail}` : 'No email available'}\n      >\n        ‚úâÔ∏è Email\n      </button>\n      \n      <button\n        className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium\n          bg-purple-100 text-purple-700 hover:bg-purple-200 transition-colors\"\n      >\n        üìÖ Schedule\n      </button>\n      \n      <button\n        className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium\n          bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors\"\n      >\n        üìù Add Note\n      </button>\n    </div>\n  );\n}\n\nexport default SuggestedActionCard;\n","/**\n * Intent Extraction Utility\n * Extracts intent and key information from conversations\n */\n\nimport { ConversationMessage, LeadIntent, ExtractedInfo } from '../types';\n\n// Intent detection patterns\nconst INTENT_PATTERNS: Record<LeadIntent, RegExp[]> = {\n  sales: [\n    /want to (start|form|create|register|buy|purchase)/i,\n    /need (an?|to) (llc|corporation|business|entity)/i,\n    /help me (start|form|create)/i,\n    /looking to (start|form|create|buy|purchase)/i,\n    /interested in (starting|forming|buying|purchasing)/i,\n    /ready to (start|begin|proceed|buy|purchase)/i,\n    /how (do i|can i) (start|form|create)/i,\n    /want to buy/i,\n    /i want to buy/i,\n    /purchase your services/i,\n    /buy your services/i\n  ],\n  booking: [\n    /schedule (a |an )?(consultation|meeting|call|appointment)/i,\n    /book (a |an )?(consultation|meeting|call|appointment)/i,\n    /set up (a |an )?(consultation|meeting|call)/i,\n    /when (are you|can we) (available|meet)/i,\n    /available (times?|slots?)/i,\n    /let's (talk|meet|schedule)/i\n  ],\n  question: [\n    /what (is|are|does)/i,\n    /how (does|do|much|long)/i,\n    /can you (explain|tell me)/i,\n    /difference between/i,\n    /\\?$/,\n    /wondering (about|if)/i\n  ],\n  support: [\n    /problem (with|regarding)/i,\n    /issue (with|regarding)/i,\n    /help (me )?(fix|resolve|with)/i,\n    /not working/i,\n    /existing (filing|account|business)/i,\n    /already (filed|registered)/i\n  ],\n  unknown: []\n};\n\n// Business type patterns\nconst BUSINESS_TYPE_PATTERNS = [\n  { pattern: /consulting|consultant/i, type: 'Consulting' },\n  { pattern: /restaurant|food|catering/i, type: 'Food & Restaurant' },\n  { pattern: /e-?commerce|online (store|shop)|retail/i, type: 'E-commerce/Retail' },\n  { pattern: /tech|software|app|saas/i, type: 'Technology' },\n  { pattern: /real estate|property|realty/i, type: 'Real Estate' },\n  { pattern: /construction|contractor|building/i, type: 'Construction' },\n  { pattern: /healthcare|medical|clinic|health/i, type: 'Healthcare' },\n  { pattern: /marketing|advertising|agency/i, type: 'Marketing/Agency' },\n  { pattern: /freelance|creative|design/i, type: 'Creative/Freelance' },\n  { pattern: /coaching|training|education/i, type: 'Coaching/Education' }\n];\n\n// US States for location detection\nconst US_STATES = [\n  'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado', 'Connecticut',\n  'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa',\n  'Kansas', 'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts', 'Michigan',\n  'Minnesota', 'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada', 'New Hampshire',\n  'New Jersey', 'New Mexico', 'New York', 'North Carolina', 'North Dakota', 'Ohio',\n  'Oklahoma', 'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota',\n  'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington', 'West Virginia',\n  'Wisconsin', 'Wyoming'\n];\n\n// Timeline patterns\nconst TIMELINE_PATTERNS = [\n  { pattern: /today|immediately|asap|urgent/i, value: 'Urgent (Today)' },\n  { pattern: /tomorrow/i, value: 'Tomorrow' },\n  { pattern: /this week/i, value: 'This Week' },\n  { pattern: /next week/i, value: 'Next Week' },\n  { pattern: /this month/i, value: 'This Month' },\n  { pattern: /next month/i, value: 'Next Month' },\n  { pattern: /(\\d+)\\s*(days?|weeks?|months?)/i, value: 'Specific Timeline' }\n];\n\n/**\n * Extract primary intent from conversation\n */\nexport function extractIntent(conversation: ConversationMessage[]): LeadIntent {\n  const userMessages = conversation\n    .filter(m => m.role === 'user')\n    .map(m => m.content)\n    .join(' ');\n\n  // Check each intent type\n  for (const [intent, patterns] of Object.entries(INTENT_PATTERNS)) {\n    if (intent === 'unknown') continue;\n    \n    for (const pattern of patterns) {\n      if (pattern.test(userMessages)) {\n        return intent as LeadIntent;\n      }\n    }\n  }\n\n  return 'unknown';\n}\n\n/**\n * Extract key information from conversation\n */\nexport function extractKeyInfo(conversation: ConversationMessage[]): ExtractedInfo {\n  const userMessages = conversation\n    .filter(m => m.role === 'user')\n    .map(m => m.content)\n    .join(' ');\n\n  const info: ExtractedInfo = {};\n\n  // Extract business type\n  for (const { pattern, type } of BUSINESS_TYPE_PATTERNS) {\n    if (pattern.test(userMessages)) {\n      info.businessType = type;\n      break;\n    }\n  }\n\n  // Extract location (state)\n  for (const state of US_STATES) {\n    if (userMessages.toLowerCase().includes(state.toLowerCase())) {\n      info.location = state;\n      break;\n    }\n  }\n\n  // Extract timeline\n  for (const { pattern, value } of TIMELINE_PATTERNS) {\n    if (pattern.test(userMessages)) {\n      info.timeline = value;\n      break;\n    }\n  }\n\n  // Extract budget mentions\n  const budgetMatch = userMessages.match(/\\$[\\d,]+|\\d+\\s*(dollars?|k|thousand)/i);\n  if (budgetMatch) {\n    info.budget = budgetMatch[0];\n  }\n\n  return info;\n}\n\n/**\n * Get highlights from a message\n */\nexport function getMessageHighlights(content: string): string[] {\n  const highlights: string[] = [];\n\n  // Check for business type mentions\n  for (const { pattern, type } of BUSINESS_TYPE_PATTERNS) {\n    if (pattern.test(content)) {\n      highlights.push(type);\n    }\n  }\n\n  // Check for state mentions\n  for (const state of US_STATES) {\n    if (content.toLowerCase().includes(state.toLowerCase())) {\n      highlights.push(state);\n    }\n  }\n\n  // Check for timeline mentions\n  for (const { pattern, value } of TIMELINE_PATTERNS) {\n    if (pattern.test(content)) {\n      highlights.push(value);\n    }\n  }\n\n  return highlights;\n}\n\n/**\n * Create a business-friendly conversation summary\n * CRITICAL: No technical jargon (sessions, logs, transcripts)\n */\nexport function summarizeConversation(conversation: ConversationMessage[]): string {\n  const userMessages = conversation.filter(m => m.role === 'user');\n  \n  if (userMessages.length === 0) {\n    return 'No messages from this person yet.';\n  }\n\n  const intent = extractIntent(conversation);\n  const info = extractKeyInfo(conversation);\n\n  let summary = '';\n\n  // Start with intent-based summary\n  switch (intent) {\n    case 'sales':\n      summary = 'This person is interested in starting a business';\n      break;\n    case 'booking':\n      summary = 'This person wants to schedule a consultation';\n      break;\n    case 'question':\n      summary = 'This person has questions';\n      break;\n    case 'support':\n      summary = 'This person needs help with an existing matter';\n      break;\n    default:\n      summary = 'This person reached out';\n  }\n\n  // Add extracted details\n  const details: string[] = [];\n  \n  if (info.businessType) {\n    details.push(`business type: ${info.businessType}`);\n  }\n  if (info.location) {\n    details.push(`location: ${info.location}`);\n  }\n  if (info.timeline) {\n    details.push(`timeline: ${info.timeline}`);\n  }\n\n  if (details.length > 0) {\n    summary += ` (${details.join(', ')})`;\n  }\n\n  summary += '.';\n\n  // Add first user message as context\n  const firstMessage = userMessages[0].content;\n  if (firstMessage.length > 10) {\n    const truncated = firstMessage.length > 100 \n      ? firstMessage.substring(0, 100) + '...'\n      : firstMessage;\n    summary += ` They said: \"${truncated}\"`;\n  }\n\n  return summary;\n}\n"],"names":[],"mappings":"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"}