{"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5972bc34.module.css [app-rsc] (css module)","../../../../../../damianwebsite/frontend/components/layout/Header.tsx/__nextjs-internal-proxy.mjs","../../../../../../damianwebsite/node_modules/%40swc/helpers/cjs/_interop_require_wildcard.cjs","../../../../../../damianwebsite/node_modules/next/dist/client/app-dir/link.js/__nextjs-internal-proxy.cjs","../../../../../../damianwebsite/node_modules/next/src/client/app-dir/link.tsx","../../../../../../damianwebsite/node_modules/next/src/client/app-dir/link.react-server.tsx","../../../../../../damianwebsite/frontend/chatbot/ChatSafeWrapper.tsx/__nextjs-internal-proxy.mjs","../../../../../../damianwebsite/frontend/chatbot/components/ChatWidget.tsx/__nextjs-internal-proxy.mjs","../../../../../../damianwebsite/frontend/chatbot/components/ChatWidgetPortal.tsx/__nextjs-internal-proxy.mjs","../../../../../../damianwebsite/frontend/chatbot/components/ChatBubble.tsx/__nextjs-internal-proxy.mjs","../../../../../../damianwebsite/frontend/chatbot/components/ChatModal.tsx/__nextjs-internal-proxy.mjs","turbopack:///[next]/internal/font/google/inter_5972bc34.js","../../../../../../damianwebsite/frontend/app/layout.tsx","../../../../../../damianwebsite/frontend/components/layout/Footer.tsx","../../../../../../damianwebsite/frontend/chatbot/index.ts","../../../../../../damianwebsite/frontend/chatbot/kb/public.ts","../../../../../../damianwebsite/frontend/chatbot/kb/internal.ts","../../../../../../damianwebsite/frontend/chatbot/copy/messages.ts","../../../../../../damianwebsite/frontend/chatbot/logic/intents.ts","../../../../../../damianwebsite/frontend/chatbot/logic/gatekeeper.ts","../../../../../../damianwebsite/frontend/chatbot/logic/intakeMode.ts","../../../../../../damianwebsite/frontend/chatbot/logic/state.ts","../../../../../../damianwebsite/frontend/chatbot/logic/smartValidation.ts","../../../../../../damianwebsite/frontend/chatbot/logic/questionAnswering.ts","../../../../../../damianwebsite/frontend/chatbot/logic/router.ts"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"inter_5972bc34-module__OU16Qa__className\",\n});\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/damianwebsite/frontend/components/layout/Header.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/damianwebsite/frontend/components/layout/Header.tsx\",\n    \"default\",\n);\n","\"use strict\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n    if (typeof WeakMap !== \"function\") return null;\n\n    var cacheBabelInterop = new WeakMap();\n    var cacheNodeInterop = new WeakMap();\n\n    return (_getRequireWildcardCache = function(nodeInterop) {\n        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n    })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n    if (!nodeInterop && obj && obj.__esModule) return obj;\n    if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") return { default: obj };\n\n    var cache = _getRequireWildcardCache(nodeInterop);\n\n    if (cache && cache.has(obj)) return cache.get(obj);\n\n    var newObj = { __proto__: null };\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n    for (var key in obj) {\n        if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n            if (desc && (desc.get || desc.set)) Object.defineProperty(newObj, key, desc);\n            else newObj[key] = obj[key];\n        }\n    }\n\n    newObj.default = obj;\n\n    if (cache) cache.set(obj, newObj);\n\n    return newObj;\n}\nexports._ = _interop_require_wildcard;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nconst { createClientModuleProxy } = require(\"react-server-dom-turbopack/server\");\n\n__turbopack_context__.n(createClientModuleProxy(\"[project]/damianwebsite/node_modules/next/dist/client/app-dir/link.js\"));\n","'use client'\n\nimport React, { createContext, useContext, useOptimistic, useRef } from 'react'\nimport type { UrlObject } from 'url'\nimport { formatUrl } from '../../shared/lib/router/utils/format-url'\nimport { AppRouterContext } from '../../shared/lib/app-router-context.shared-runtime'\nimport { useMergedRef } from '../use-merged-ref'\nimport { isAbsoluteUrl } from '../../shared/lib/utils'\nimport { addBasePath } from '../add-base-path'\nimport { warnOnce } from '../../shared/lib/utils/warn-once'\nimport type { PENDING_LINK_STATUS } from '../components/links'\nimport {\n  IDLE_LINK_STATUS,\n  mountLinkInstance,\n  onNavigationIntent,\n  unmountLinkForCurrentNavigation,\n  unmountPrefetchableInstance,\n  type LinkInstance,\n} from '../components/links'\nimport { isLocalURL } from '../../shared/lib/router/utils/is-local-url'\nimport {\n  FetchStrategy,\n  type PrefetchTaskFetchStrategy,\n} from '../components/segment-cache/types'\nimport { errorOnce } from '../../shared/lib/utils/error-once'\n\ntype Url = string | UrlObject\ntype RequiredKeys<T> = {\n  [K in keyof T]-?: {} extends Pick<T, K> ? never : K\n}[keyof T]\ntype OptionalKeys<T> = {\n  [K in keyof T]-?: {} extends Pick<T, K> ? K : never\n}[keyof T]\n\ntype OnNavigateEventHandler = (event: { preventDefault: () => void }) => void\n\ntype InternalLinkProps = {\n  /**\n   * **Required**. The path or URL to navigate to. It can also be an object (similar to `URL`).\n   *\n   * @example\n   * ```tsx\n   * // Navigate to /dashboard:\n   * <Link href=\"/dashboard\">Dashboard</Link>\n   *\n   * // Navigate to /about?name=test:\n   * <Link href={{ pathname: '/about', query: { name: 'test' } }}>\n   *   About\n   * </Link>\n   * ```\n   *\n   * @remarks\n   * - For external URLs, use a fully qualified URL such as `https://...`.\n   * - In the App Router, dynamic routes must not include bracketed segments in `href`.\n   */\n  href: Url\n\n  /**\n   * @deprecated v10.0.0: `href` props pointing to a dynamic route are\n   * automatically resolved and no longer require the `as` prop.\n   */\n  as?: Url\n\n  /**\n   * Replace the current `history` state instead of adding a new URL into the stack.\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/about\" replace>\n   *   About (replaces the history state)\n   * </Link>\n   * ```\n   */\n  replace?: boolean\n\n  /**\n   * Whether to override the default scroll behavior. If `true`, Next.js attempts to maintain\n   * the scroll position if the newly navigated page is still visible. If not, it scrolls to the top.\n   *\n   * If `false`, Next.js will not modify the scroll behavior at all.\n   *\n   * @defaultValue `true`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" scroll={false}>\n   *   No auto scroll\n   * </Link>\n   * ```\n   */\n  scroll?: boolean\n\n  /**\n   * Update the path of the current page without rerunning data fetching methods\n   * like `getStaticProps`, `getServerSideProps`, or `getInitialProps`.\n   *\n   * @remarks\n   * `shallow` only applies to the Pages Router. For the App Router, see the\n   * [following documentation](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#using-the-native-history-api).\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/blog\" shallow>\n   *   Shallow navigation\n   * </Link>\n   * ```\n   */\n  shallow?: boolean\n\n  /**\n   * Forces `Link` to pass its `href` to the child component. Useful if the child is a custom\n   * component that wraps an `<a>` tag, or if you're using certain styling libraries.\n   *\n   * @defaultValue `false`\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" passHref legacyBehavior>\n   *   <MyStyledAnchor>Dashboard</MyStyledAnchor>\n   * </Link>\n   * ```\n   */\n  passHref?: boolean\n\n  /**\n   * Prefetch the page in the background.\n   * Any `<Link />` that is in the viewport (initially or through scroll) will be prefetched.\n   * Prefetch can be disabled by passing `prefetch={false}`.\n   *\n   * @remarks\n   * Prefetching is only enabled in production.\n   *\n   * - In the **App Router**:\n   *   - `\"auto\"`, `null`, `undefined` (default): Prefetch behavior depends on static vs dynamic routes:\n   *     - Static routes: fully prefetched\n   *     - Dynamic routes: partial prefetch to the nearest segment with a `loading.js`\n   *   - `true`: Always prefetch the full route and data.\n   *   - `false`: Disable prefetching on both viewport and hover.\n   * - In the **Pages Router**:\n   *   - `true` (default): Prefetches the route and data in the background on viewport or hover.\n   *   - `false`: Prefetch only on hover, not on viewport.\n   *\n   * @defaultValue `true` (Pages Router) or `null` (App Router)\n   *\n   * @example\n   * ```tsx\n   * <Link href=\"/dashboard\" prefetch={false}>\n   *   Dashboard\n   * </Link>\n   * ```\n   */\n  prefetch?: boolean | 'auto' | null\n\n  /**\n   * (unstable) Switch to a full prefetch on hover. Effectively the same as\n   * updating the prefetch prop to `true` in a mouse event.\n   */\n  unstable_dynamicOnHover?: boolean\n\n  /**\n   * The active locale is automatically prepended in the Pages Router. `locale` allows for providing\n   * a different locale, or can be set to `false` to opt out of automatic locale behavior.\n   *\n   * @remarks\n   * Note: locale only applies in the Pages Router and is ignored in the App Router.\n   *\n   * @example\n   * ```tsx\n   * // Use the 'fr' locale:\n   * <Link href=\"/about\" locale=\"fr\">\n   *   About (French)\n   * </Link>\n   *\n   * // Disable locale prefix:\n   * <Link href=\"/about\" locale={false}>\n   *   About (no locale prefix)\n   * </Link>\n   * ```\n   */\n  locale?: string | false\n\n  /**\n   * Enable legacy link behavior.\n   *\n   * @deprecated This will be removed in a future version\n   * @defaultValue `false`\n   * @see https://github.com/vercel/next.js/commit/489e65ed98544e69b0afd7e0cfc3f9f6c2b803b7\n   */\n  legacyBehavior?: boolean\n\n  /**\n   * Optional event handler for when the mouse pointer is moved onto the `<Link>`.\n   */\n  onMouseEnter?: React.MouseEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is touched.\n   */\n  onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is clicked.\n   */\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>\n\n  /**\n   * Optional event handler for when the `<Link>` is navigated.\n   */\n  onNavigate?: OnNavigateEventHandler\n}\n\n// TODO-APP: Include the full set of Anchor props\n// adding this to the publicly exported type currently breaks existing apps\n\n// `RouteInferType` is a stub here to avoid breaking `typedRoutes` when the type\n// isn't generated yet. It will be replaced when type generation runs.\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport type LinkProps<RouteInferType = any> = InternalLinkProps\ntype LinkPropsRequired = RequiredKeys<LinkProps>\ntype LinkPropsOptional = OptionalKeys<Omit<InternalLinkProps, 'locale'>>\n\nfunction isModifiedEvent(event: React.MouseEvent): boolean {\n  const eventTarget = event.currentTarget as HTMLAnchorElement | SVGAElement\n  const target = eventTarget.getAttribute('target')\n  return (\n    (target && target !== '_self') ||\n    event.metaKey ||\n    event.ctrlKey ||\n    event.shiftKey ||\n    event.altKey || // triggers resource download\n    (event.nativeEvent && event.nativeEvent.which === 2)\n  )\n}\n\nfunction linkClicked(\n  e: React.MouseEvent,\n  href: string,\n  as: string,\n  linkInstanceRef: React.RefObject<LinkInstance | null>,\n  replace?: boolean,\n  scroll?: boolean,\n  onNavigate?: OnNavigateEventHandler\n): void {\n  if (typeof window !== 'undefined') {\n    const { nodeName } = e.currentTarget\n\n    // anchors inside an svg have a lowercase nodeName\n    const isAnchorNodeName = nodeName.toUpperCase() === 'A'\n    if (\n      (isAnchorNodeName && isModifiedEvent(e)) ||\n      e.currentTarget.hasAttribute('download')\n    ) {\n      // ignore click for browser’s default behavior\n      return\n    }\n\n    if (!isLocalURL(href)) {\n      if (replace) {\n        // browser default behavior does not replace the history state\n        // so we need to do it manually\n        e.preventDefault()\n        location.replace(href)\n      }\n\n      // ignore click for browser’s default behavior\n      return\n    }\n\n    e.preventDefault()\n\n    if (onNavigate) {\n      let isDefaultPrevented = false\n\n      onNavigate({\n        preventDefault: () => {\n          isDefaultPrevented = true\n        },\n      })\n\n      if (isDefaultPrevented) {\n        return\n      }\n    }\n\n    const { dispatchNavigateAction } =\n      require('../components/app-router-instance') as typeof import('../components/app-router-instance')\n\n    React.startTransition(() => {\n      dispatchNavigateAction(\n        as || href,\n        replace ? 'replace' : 'push',\n        scroll ?? true,\n        linkInstanceRef.current\n      )\n    })\n  }\n}\n\nfunction formatStringOrUrl(urlObjOrString: UrlObject | string): string {\n  if (typeof urlObjOrString === 'string') {\n    return urlObjOrString\n  }\n\n  return formatUrl(urlObjOrString)\n}\n\n/**\n * A React component that extends the HTML `<a>` element to provide\n * [prefetching](https://nextjs.org/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)\n * and client-side navigation. This is the primary way to navigate between routes in Next.js.\n *\n * @remarks\n * - Prefetching is only enabled in production.\n *\n * @see https://nextjs.org/docs/app/api-reference/components/link\n */\nexport default function LinkComponent(\n  props: LinkProps & {\n    children: React.ReactNode\n    ref: React.Ref<HTMLAnchorElement>\n  }\n) {\n  const [linkStatus, setOptimisticLinkStatus] = useOptimistic(IDLE_LINK_STATUS)\n\n  let children: React.ReactNode\n\n  const linkInstanceRef = useRef<LinkInstance | null>(null)\n\n  const {\n    href: hrefProp,\n    as: asProp,\n    children: childrenProp,\n    prefetch: prefetchProp = null,\n    passHref,\n    replace,\n    shallow,\n    scroll,\n    onClick,\n    onMouseEnter: onMouseEnterProp,\n    onTouchStart: onTouchStartProp,\n    legacyBehavior = false,\n    onNavigate,\n    ref: forwardedRef,\n    unstable_dynamicOnHover,\n    ...restProps\n  } = props\n\n  children = childrenProp\n\n  if (\n    legacyBehavior &&\n    (typeof children === 'string' || typeof children === 'number')\n  ) {\n    children = <a>{children}</a>\n  }\n\n  const router = React.useContext(AppRouterContext)\n\n  const prefetchEnabled = prefetchProp !== false\n\n  const fetchStrategy =\n    prefetchProp !== false\n      ? getFetchStrategyFromPrefetchProp(prefetchProp)\n      : // TODO: it makes no sense to assign a fetchStrategy when prefetching is disabled.\n        FetchStrategy.PPR\n\n  if (process.env.NODE_ENV !== 'production') {\n    function createPropError(args: {\n      key: string\n      expected: string\n      actual: string\n    }) {\n      return new Error(\n        `Failed prop type: The prop \\`${args.key}\\` expects a ${args.expected} in \\`<Link>\\`, but got \\`${args.actual}\\` instead.` +\n          (typeof window !== 'undefined'\n            ? \"\\nOpen your browser's console to view the Component stack trace.\"\n            : '')\n      )\n    }\n\n    // TypeScript trick for type-guarding:\n    const requiredPropsGuard: Record<LinkPropsRequired, true> = {\n      href: true,\n    } as const\n    const requiredProps: LinkPropsRequired[] = Object.keys(\n      requiredPropsGuard\n    ) as LinkPropsRequired[]\n    requiredProps.forEach((key: LinkPropsRequired) => {\n      if (key === 'href') {\n        if (\n          props[key] == null ||\n          (typeof props[key] !== 'string' && typeof props[key] !== 'object')\n        ) {\n          throw createPropError({\n            key,\n            expected: '`string` or `object`',\n            actual: props[key] === null ? 'null' : typeof props[key],\n          })\n        }\n      } else {\n        // TypeScript trick for type-guarding:\n        const _: never = key\n      }\n    })\n\n    // TypeScript trick for type-guarding:\n    const optionalPropsGuard: Record<LinkPropsOptional, true> = {\n      as: true,\n      replace: true,\n      scroll: true,\n      shallow: true,\n      passHref: true,\n      prefetch: true,\n      unstable_dynamicOnHover: true,\n      onClick: true,\n      onMouseEnter: true,\n      onTouchStart: true,\n      legacyBehavior: true,\n      onNavigate: true,\n    } as const\n    const optionalProps: LinkPropsOptional[] = Object.keys(\n      optionalPropsGuard\n    ) as LinkPropsOptional[]\n    optionalProps.forEach((key: LinkPropsOptional) => {\n      const valType = typeof props[key]\n\n      if (key === 'as') {\n        if (props[key] && valType !== 'string' && valType !== 'object') {\n          throw createPropError({\n            key,\n            expected: '`string` or `object`',\n            actual: valType,\n          })\n        }\n      } else if (\n        key === 'onClick' ||\n        key === 'onMouseEnter' ||\n        key === 'onTouchStart' ||\n        key === 'onNavigate'\n      ) {\n        if (props[key] && valType !== 'function') {\n          throw createPropError({\n            key,\n            expected: '`function`',\n            actual: valType,\n          })\n        }\n      } else if (\n        key === 'replace' ||\n        key === 'scroll' ||\n        key === 'shallow' ||\n        key === 'passHref' ||\n        key === 'legacyBehavior' ||\n        key === 'unstable_dynamicOnHover'\n      ) {\n        if (props[key] != null && valType !== 'boolean') {\n          throw createPropError({\n            key,\n            expected: '`boolean`',\n            actual: valType,\n          })\n        }\n      } else if (key === 'prefetch') {\n        if (\n          props[key] != null &&\n          valType !== 'boolean' &&\n          props[key] !== 'auto'\n        ) {\n          throw createPropError({\n            key,\n            expected: '`boolean | \"auto\"`',\n            actual: valType,\n          })\n        }\n      } else {\n        // TypeScript trick for type-guarding:\n        const _: never = key\n      }\n    })\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (props.locale) {\n      warnOnce(\n        'The `locale` prop is not supported in `next/link` while using the `app` router. Read more about app router internalization: https://nextjs.org/docs/app/building-your-application/routing/internationalization'\n      )\n    }\n    if (!asProp) {\n      let href: string | undefined\n      if (typeof hrefProp === 'string') {\n        href = hrefProp\n      } else if (\n        typeof hrefProp === 'object' &&\n        typeof hrefProp.pathname === 'string'\n      ) {\n        href = hrefProp.pathname\n      }\n\n      if (href) {\n        const hasDynamicSegment = href\n          .split('/')\n          .some((segment) => segment.startsWith('[') && segment.endsWith(']'))\n\n        if (hasDynamicSegment) {\n          throw new Error(\n            `Dynamic href \\`${href}\\` found in <Link> while using the \\`/app\\` router, this is not supported. Read more: https://nextjs.org/docs/messages/app-dir-dynamic-href`\n          )\n        }\n      }\n    }\n  }\n\n  const { href, as } = React.useMemo(() => {\n    const resolvedHref = formatStringOrUrl(hrefProp)\n    return {\n      href: resolvedHref,\n      as: asProp ? formatStringOrUrl(asProp) : resolvedHref,\n    }\n  }, [hrefProp, asProp])\n\n  // This will return the first child, if multiple are provided it will throw an error\n  let child: any\n  if (legacyBehavior) {\n    if ((children as any)?.$$typeof === Symbol.for('react.lazy')) {\n      throw new Error(\n        `\\`<Link legacyBehavior>\\` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's \\`<a>\\` tag.`\n      )\n    }\n\n    if (process.env.NODE_ENV === 'development') {\n      if (onClick) {\n        console.warn(\n          `\"onClick\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onClick be set on the child of next/link`\n        )\n      }\n      if (onMouseEnterProp) {\n        console.warn(\n          `\"onMouseEnter\" was passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but \"legacyBehavior\" was set. The legacy behavior requires onMouseEnter be set on the child of next/link`\n        )\n      }\n      try {\n        child = React.Children.only(children)\n      } catch (err) {\n        if (!children) {\n          throw new Error(\n            `No children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but one child is required https://nextjs.org/docs/messages/link-no-children`\n          )\n        }\n        throw new Error(\n          `Multiple children were passed to <Link> with \\`href\\` of \\`${hrefProp}\\` but only one child is supported https://nextjs.org/docs/messages/link-multiple-children` +\n            (typeof window !== 'undefined'\n              ? \" \\nOpen your browser's console to view the Component stack trace.\"\n              : '')\n        )\n      }\n    } else {\n      child = React.Children.only(children)\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if ((children as any)?.type === 'a') {\n        throw new Error(\n          'Invalid <Link> with <a> child. Please remove <a> or use <Link legacyBehavior>.\\nLearn more: https://nextjs.org/docs/messages/invalid-new-link-with-extra-anchor'\n        )\n      }\n    }\n  }\n\n  const childRef: any = legacyBehavior\n    ? child && typeof child === 'object' && child.ref\n    : forwardedRef\n\n  // Use a callback ref to attach an IntersectionObserver to the anchor tag on\n  // mount. In the future we will also use this to keep track of all the\n  // currently mounted <Link> instances, e.g. so we can re-prefetch them after\n  // a revalidation or refresh.\n  const observeLinkVisibilityOnMount = React.useCallback(\n    (element: HTMLAnchorElement | SVGAElement) => {\n      if (router !== null) {\n        linkInstanceRef.current = mountLinkInstance(\n          element,\n          href,\n          router,\n          fetchStrategy,\n          prefetchEnabled,\n          setOptimisticLinkStatus\n        )\n      }\n\n      return () => {\n        if (linkInstanceRef.current) {\n          unmountLinkForCurrentNavigation(linkInstanceRef.current)\n          linkInstanceRef.current = null\n        }\n        unmountPrefetchableInstance(element)\n      }\n    },\n    [prefetchEnabled, href, router, fetchStrategy, setOptimisticLinkStatus]\n  )\n\n  const mergedRef = useMergedRef(observeLinkVisibilityOnMount, childRef)\n\n  const childProps: {\n    onTouchStart?: React.TouchEventHandler<HTMLAnchorElement>\n    onMouseEnter: React.MouseEventHandler<HTMLAnchorElement>\n    onClick: React.MouseEventHandler<HTMLAnchorElement>\n    href?: string\n    ref?: any\n  } = {\n    ref: mergedRef,\n    onClick(e) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (!e) {\n          throw new Error(\n            `Component rendered inside next/link has to pass click event to \"onClick\" prop.`\n          )\n        }\n      }\n\n      if (!legacyBehavior && typeof onClick === 'function') {\n        onClick(e)\n      }\n\n      if (\n        legacyBehavior &&\n        child.props &&\n        typeof child.props.onClick === 'function'\n      ) {\n        child.props.onClick(e)\n      }\n\n      if (!router) {\n        return\n      }\n      if (e.defaultPrevented) {\n        return\n      }\n      linkClicked(e, href, as, linkInstanceRef, replace, scroll, onNavigate)\n    },\n    onMouseEnter(e) {\n      if (!legacyBehavior && typeof onMouseEnterProp === 'function') {\n        onMouseEnterProp(e)\n      }\n\n      if (\n        legacyBehavior &&\n        child.props &&\n        typeof child.props.onMouseEnter === 'function'\n      ) {\n        child.props.onMouseEnter(e)\n      }\n\n      if (!router) {\n        return\n      }\n      if (!prefetchEnabled || process.env.NODE_ENV === 'development') {\n        return\n      }\n\n      const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n      onNavigationIntent(\n        e.currentTarget as HTMLAnchorElement | SVGAElement,\n        upgradeToDynamicPrefetch\n      )\n    },\n    onTouchStart: process.env.__NEXT_LINK_NO_TOUCH_START\n      ? undefined\n      : function onTouchStart(e) {\n          if (!legacyBehavior && typeof onTouchStartProp === 'function') {\n            onTouchStartProp(e)\n          }\n\n          if (\n            legacyBehavior &&\n            child.props &&\n            typeof child.props.onTouchStart === 'function'\n          ) {\n            child.props.onTouchStart(e)\n          }\n\n          if (!router) {\n            return\n          }\n          if (!prefetchEnabled) {\n            return\n          }\n\n          const upgradeToDynamicPrefetch = unstable_dynamicOnHover === true\n          onNavigationIntent(\n            e.currentTarget as HTMLAnchorElement | SVGAElement,\n            upgradeToDynamicPrefetch\n          )\n        },\n  }\n\n  // If the url is absolute, we can bypass the logic to prepend the basePath.\n  if (isAbsoluteUrl(as)) {\n    childProps.href = as\n  } else if (\n    !legacyBehavior ||\n    passHref ||\n    (child.type === 'a' && !('href' in child.props))\n  ) {\n    childProps.href = addBasePath(as)\n  }\n\n  let link: React.ReactNode\n\n  if (legacyBehavior) {\n    if (process.env.NODE_ENV === 'development') {\n      errorOnce(\n        '`legacyBehavior` is deprecated and will be removed in a future ' +\n          'release. A codemod is available to upgrade your components:\\n\\n' +\n          'npx @next/codemod@latest new-link .\\n\\n' +\n          'Learn more: https://nextjs.org/docs/app/building-your-application/upgrading/codemods#remove-a-tags-from-link-components'\n      )\n    }\n    link = React.cloneElement(child, childProps)\n  } else {\n    link = (\n      <a {...restProps} {...childProps}>\n        {children}\n      </a>\n    )\n  }\n\n  return (\n    <LinkStatusContext.Provider value={linkStatus}>\n      {link}\n    </LinkStatusContext.Provider>\n  )\n}\n\nconst LinkStatusContext = createContext<\n  typeof PENDING_LINK_STATUS | typeof IDLE_LINK_STATUS\n>(IDLE_LINK_STATUS)\n\nexport const useLinkStatus = () => {\n  return useContext(LinkStatusContext)\n}\n\nfunction getFetchStrategyFromPrefetchProp(\n  prefetchProp: Exclude<LinkProps['prefetch'], undefined | false>\n): PrefetchTaskFetchStrategy {\n  if (process.env.__NEXT_CACHE_COMPONENTS) {\n    if (prefetchProp === true) {\n      return FetchStrategy.Full\n    }\n\n    // `null` or `\"auto\"`: this is the default \"auto\" mode, where we will prefetch partially if the link is in the viewport.\n    // This will also include invalid prop values that don't match the types specified here.\n    // (although those should've been filtered out by prop validation in dev)\n    prefetchProp satisfies null | 'auto'\n    return FetchStrategy.PPR\n  } else {\n    return prefetchProp === null || prefetchProp === 'auto'\n      ? // We default to PPR, and we'll discover whether or not the route supports it with the initial prefetch.\n        FetchStrategy.PPR\n      : // In the old implementation without runtime prefetches, `prefetch={true}` forces all dynamic data to be prefetched.\n        // To preserve backwards-compatibility, anything other than `false`, `null`, or `\"auto\"` results in a full prefetch.\n        // (although invalid values should've been filtered out by prop validation in dev)\n        FetchStrategy.Full\n  }\n}\n","import type { ComponentProps } from 'react'\nimport ClientLinkComponent, { type LinkProps, useLinkStatus } from './link'\n\nexport default function LinkComponent(\n  props: ComponentProps<typeof ClientLinkComponent>\n) {\n  const isLegacyBehavior = props.legacyBehavior\n  const childIsHostComponent =\n    typeof props.children === 'string' ||\n    typeof props.children === 'number' ||\n    typeof (props.children as any)?.type === 'string'\n  const childIsClientComponent =\n    (props.children as any)?.type?.$$typeof ===\n    Symbol.for('react.client.reference')\n\n  if (isLegacyBehavior && !childIsHostComponent && !childIsClientComponent) {\n    if ((props.children as any)?.type?.$$typeof === Symbol.for('react.lazy')) {\n      console.error(\n        `Using a Lazy Component as a direct child of \\`<Link legacyBehavior>\\` from a Server Component is not supported. If you need legacyBehavior, wrap your Lazy Component in a Client Component that renders the Link's \\`<a>\\` tag.`\n      )\n    } else {\n      console.error(\n        `Using a Server Component as a direct child of \\`<Link legacyBehavior>\\` is not supported. If you need legacyBehavior, wrap your Server Component in a Client Component that renders the Link's \\`<a>\\` tag.`\n      )\n    }\n  }\n\n  return <ClientLinkComponent {...props} />\n}\n\nexport { type LinkProps, useLinkStatus }\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/damianwebsite/frontend/chatbot/ChatSafeWrapper.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/damianwebsite/frontend/chatbot/ChatSafeWrapper.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/damianwebsite/frontend/chatbot/components/ChatWidget.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/damianwebsite/frontend/chatbot/components/ChatWidget.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/damianwebsite/frontend/chatbot/components/ChatWidgetPortal.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/damianwebsite/frontend/chatbot/components/ChatWidgetPortal.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/damianwebsite/frontend/chatbot/components/ChatBubble.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/damianwebsite/frontend/chatbot/components/ChatBubble.tsx\",\n    \"default\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/damianwebsite/frontend/chatbot/components/ChatModal.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/damianwebsite/frontend/chatbot/components/ChatModal.tsx\",\n    \"default\",\n);\n","import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Inter%22,%22arguments%22:[{%22subsets%22:[%22latin%22]}],%22variableName%22:%22inter%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Inter', 'Inter Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n","import type { Metadata } from 'next'\nimport { Inter } from 'next/font/google'\nimport './globals.css'\nimport Header from '@/components/layout/Header'\nimport Footer from '@/components/layout/Footer'\nimport { ChatSafeWrapper } from '@/chatbot'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport const metadata: Metadata = {\n  title: 'Innovation Business Development Solutions | Complete Business Infrastructure',\n  description: 'National business infrastructure firm providing formation, websites, custom applications, AI tools, email systems, and compliance — all coordinated as one system.',\n  keywords: 'business infrastructure, business formation, custom websites, business applications, AI tools, email infrastructure, business compliance, complete business systems',\n}\n\nexport const viewport = {\n  width: 'device-width',\n  initialScale: 1,\n  maximumScale: 5,\n  userScalable: true,\n  viewportFit: 'cover',\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover\" />\n      </head>\n      <body className={inter.className}>\n        <Header />\n        <main>{children}</main>\n        <Footer />\n        <ChatSafeWrapper />\n      </body>\n    </html>\n  )\n}\n","import Link from 'next/link'\n\nconst Footer = () => {\n  const currentYear = new Date().getFullYear()\n\n  const footerLinks = {\n    company: [\n      { label: 'About Us', href: '/about' },\n      { label: 'Services', href: '/services' },\n      { label: 'Who We Serve', href: '/who-we-serve' },\n      { label: 'Starting a Business', href: '/starting-a-business' },\n      { label: 'Contact', href: '/contact' },\n    ],\n    services: [\n      { label: 'Business Formation', href: '/services#formation' },\n      { label: 'Websites & Domains', href: '/services#websites' },\n      { label: 'Custom Applications', href: '/services#applications' },\n      { label: 'AI Tools', href: '/services#ai' },\n      { label: 'Email Infrastructure', href: '/services#email' },\n      { label: 'Compliance Support', href: '/services#compliance' },\n    ],\n  }\n\n  return (\n    <footer className=\"bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 text-white border-t border-blue-900/30 relative overflow-hidden\">\n      {/* Blue ambient glow */}\n      <div className=\"absolute top-0 right-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl\" />\n      \n      <div className=\"container-custom py-16 md:py-20 relative z-10\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 md:gap-12\">\n          {/* Brand */}\n          <div className=\"md:col-span-2\">\n            <Link href=\"/\" className=\"inline-block mb-6\">\n              <div className=\"flex flex-col\">\n                <span className=\"text-2xl font-bold\">Innovation</span>\n                <span className=\"text-sm text-neutral-400\">Business Development Solutions</span>\n              </div>\n            </Link>\n            <p className=\"text-neutral-400 leading-relaxed max-w-md mb-6\">\n              National business scaling infrastructure. From multi-state licensing and formation to custom AI and digital growth, we build the systems you need to expand with confidence.\n            </p>\n          </div>\n\n          {/* Company Links */}\n          <div>\n            <h3 className=\"font-semibold mb-5 text-white\">Company</h3>\n            <ul className=\"space-y-3\">\n              {footerLinks.company.map((link) => (\n                <li key={link.href}>\n                  <Link\n                    href={link.href}\n                    className=\"text-neutral-400 hover:text-white transition-all duration-300\"\n                  >\n                    {link.label}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Services Links */}\n          <div>\n            <h3 className=\"font-semibold mb-5 text-white\">Services</h3>\n            <ul className=\"space-y-3\">\n              {footerLinks.services.map((link) => (\n                <li key={link.href}>\n                  <Link\n                    href={link.href}\n                    className=\"text-neutral-400 hover:text-white transition-all duration-300\"\n                  >\n                    {link.label}\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n\n        {/* Bottom Bar */}\n        <div className=\"border-t border-neutral-700/30 mt-16 pt-10 flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0\">\n          <p className=\"text-neutral-400 text-sm\">\n            © {currentYear} Innovation Business Development Solutions. All rights reserved.\n          </p>\n          <div className=\"flex space-x-8\">\n            <Link\n              href=\"/privacy\"\n              className=\"text-neutral-400 hover:text-white text-sm transition-all duration-300\"\n            >\n              Privacy Policy\n            </Link>\n            <Link\n              href=\"/terms\"\n              className=\"text-neutral-400 hover:text-white text-sm transition-all duration-300\"\n            >\n              Terms of Service\n            </Link>\n          </div>\n        </div>\n      </div>\n    </footer>\n  )\n}\n\nexport default Footer\n","/**\n * Chatbot System - Main Export\n * Production-ready HubSpot-style chatbot\n */\n\nexport { default as ChatSafeWrapper } from './ChatSafeWrapper';\nexport { default as ChatWidget } from './components/ChatWidget';\nexport { default as ChatWidgetPortal } from './components/ChatWidgetPortal';\nexport { default as ChatBubble } from './components/ChatBubble';\nexport { default as ChatModal } from './components/ChatModal';\n\nexport { publicKB } from './kb/public';\nexport { internalKB } from './kb/internal';\n\nexport { messages } from './copy/messages';\n\nexport { detectIntent, extractBusinessType, extractLocation } from './logic/intents';\nexport { evaluateEscalation, getEscalationMessage, validateResponse } from './logic/gatekeeper';\nexport { routeConversation } from './logic/router';\n\nexport type { ConversationState, SessionData } from './logic/state';\nexport type { Intent } from './logic/intents';\nexport type { EscalationType } from './logic/gatekeeper';\n","/**\n * KB-A: Public Knowledge Base\n * This is the ONLY knowledge the chatbot may directly quote or explain.\n * All content here should be safe to display verbatim on the public website.\n */\n\nexport const publicKB = {\n  services: {\n    overview: \"We provide comprehensive business development solutions including entity formation, licensing coordination, digital infrastructure, and ongoing compliance support.\",\n    formation: \"We handle LLC and nonprofit formation, multi-state registration, EIN acquisition, operating agreements, and registered agent services.\",\n    licensing: \"We coordinate business licensing requirements and multi-state compliance, working with the appropriate agencies on your behalf.\",\n    digital: \"We build professional websites, custom applications, and AI-powered tools as part of your business infrastructure.\",\n    compliance: \"We monitor ongoing compliance obligations, handle annual reports, and track renewal deadlines across all states where you operate.\",\n    notIncluded: \"We don't provide legal advice, tax preparation, or accounting services. We don't handle highly specialized professional licenses (medical, legal) directly, though we coordinate with the right agencies.\"\n  },\n  \n  entities: {\n    llc: {\n      name: \"Limited Liability Company (LLC)\",\n      description: \"An LLC protects your personal assets by separating business liability from personal liability. It offers flexible tax treatment and is suitable for most small to medium businesses.\",\n      benefits: [\"Personal asset protection\", \"Flexible tax options\", \"Simpler than corporations\", \"Credibility with clients and vendors\"]\n    },\n    corporation: {\n      name: \"Corporation\",\n      description: \"A corporation is a separate legal entity that can issue stock. It provides strong liability protection and is often used for businesses seeking investors or planning significant growth.\",\n      benefits: [\"Strong liability protection\", \"Can issue stock\", \"Perpetual existence\", \"Attractive to investors\"]\n    },\n    nonprofit: {\n      name: \"Nonprofit Corporation\",\n      description: \"A nonprofit is organized for charitable, educational, religious, or other mission-driven purposes. It can apply for tax-exempt status under 501(c)(3) and similar designations.\",\n      benefits: [\"Tax-exempt status potential\", \"Grant eligibility\", \"Mission-driven structure\", \"Donor deductibility\"]\n    }\n  },\n  \n  consultation: {\n    purpose: \"A consultation allows us to review your specific situation, including your industry, location, ownership structure, and goals. We'll recommend the right entity type and structure based on your unique needs.\",\n    what: \"During a consultation, we'll discuss your business model, review licensing requirements, assess multi-state considerations, and create a customized plan for your formation and infrastructure needs.\",\n    whenNeeded: [\n      \"You're unsure which entity type fits your situation\",\n      \"You operate or plan to operate in multiple states\",\n      \"You have licensing requirements specific to your industry\",\n      \"You need guidance on tax structure decisions\",\n      \"You have partners or complex ownership\",\n      \"You're inheriting or acquiring a business\"\n    ],\n    duration: \"Initial consultations are typically 30 minutes and are complimentary.\",\n    outcome: \"You'll receive clear recommendations, pricing, and a timeline for getting your business properly structured.\"\n  },\n  \n  process: {\n    timeline: \"Business formation typically takes 24-48 hours once intake information is complete. EIN issuance is often same-day. Website and system development varies by complexity but typically takes 2-4 weeks.\",\n    states: \"We serve businesses in all 50 states and coordinate multi-state registrations.\",\n    support: \"We provide ongoing support after formation, including compliance monitoring, annual reports, and consultation services.\"\n  },\n  \n  disclaimers: {\n    noAdvice: \"We do not provide legal advice, tax advice, or accounting services. We build business infrastructure and coordinate filings.\",\n    consultation: \"Entity selection and structure recommendations require a consultation to review your specific circumstances.\",\n    stateSpecific: \"Entity availability and requirements vary by state. We guide you through the correct structure based on your business, industry, and location.\"\n  }\n} as const;\n\nexport type PublicKB = typeof publicKB;\n","/**\n * KB-B: Internal / Restricted Knowledge Base\n * This knowledge is NEVER shown directly to users.\n * Used ONLY for escalation rules, red flags, and determining when to push consultation.\n */\n\nexport const internalKB = {\n  // Escalation triggers - when to stop and push consultation\n  escalationTriggers: {\n    // Professional licensing requirements that need review\n    licensedProfessions: [\n      'medical', 'doctor', 'physician', 'dentist', 'nurse', 'healthcare',\n      'lawyer', 'attorney', 'legal', 'law firm',\n      'architect', 'engineer', 'cpa', 'accountant',\n      'realtor', 'real estate broker', 'contractor',\n      'therapist', 'counselor', 'psychologist'\n    ],\n    \n    // Multi-state complexity\n    multiStateFlags: [\n      'multiple states', 'several states', 'all states', 'nationwide',\n      'different states', 'other states', 'expand to', 'operate in'\n    ],\n    \n    // Tax structure questions (require professional advice)\n    taxQuestions: [\n      's-corp', 's corp', 'scorp', 'tax election',\n      'pass-through', 'double taxation', 'tax treatment',\n      'which taxes', 'save on taxes', 'tax benefits'\n    ],\n    \n    // Partnership complexity\n    partnershipFlags: [\n      'partner', 'co-owner', 'multiple owners', 'split ownership',\n      'profit sharing', 'equity split', 'ownership percentage'\n    ],\n    \n    // Uncertainty signals\n    uncertaintySignals: [\n      'not sure', 'don\\'t know', 'unsure', 'confused',\n      'which one', 'help me decide', 'what should',\n      'recommend', 'best option'\n    ],\n    \n    // Inherited or acquired businesses\n    existingBusinessFlags: [\n      'inherited', 'taking over', 'buying', 'acquired',\n      'existing business', 'already has', 'transfer ownership'\n    ],\n    \n    // Funding or investor situations\n    fundingFlags: [\n      'investors', 'investment', 'funding', 'venture capital',\n      'seed round', 'angel investor', 'raising money'\n    ],\n    \n    // Nonprofit complexity\n    nonprofitFlags: [\n      '501c3', '501(c)(3)', 'charity', 'foundation',\n      'tax-exempt', 'donations', 'grant'\n    ]\n  },\n  \n  // Stop conditions - immediately escalate, no further questions\n  stopConditions: {\n    requiresLegalReview: true,\n    requiresTaxAdvice: true,\n    stateSpecificQuestion: true,\n    complexOwnership: true,\n    licensingUncertainty: true\n  },\n  \n  // Routing rules for escalation\n  escalationRouting: {\n    // When user mentions licensed profession\n    licensedProfession: {\n      acknowledge: \"I understand you're setting up a {profession} practice.\",\n      explain: \"Professional licensing requirements vary significantly by state and profession.\",\n      cta: \"A consultation will allow us to review the specific licensing requirements and structure recommendations for your field.\"\n    },\n    \n    // When user mentions multiple states\n    multiState: {\n      acknowledge: \"Operating in multiple states adds important considerations.\",\n      explain: \"Multi-state businesses require coordination of registrations, compliance, and potentially different entity structures.\",\n      cta: \"Let's schedule a consultation to review your multi-state strategy and ensure proper setup in each jurisdiction.\"\n    },\n    \n    // When user asks tax questions\n    taxStructure: {\n      acknowledge: \"Tax structure is an important decision.\",\n      explain: \"Tax elections like S-Corp status depend on your specific income, ownership, and goals.\",\n      cta: \"During a consultation, we can discuss tax structure options and connect you with the right advisors.\"\n    },\n    \n    // When user has partners\n    partnership: {\n      acknowledge: \"Partnership structures require careful planning.\",\n      explain: \"Ownership splits, decision-making authority, and profit distribution should be clearly defined.\",\n      cta: \"A consultation will help us design the right structure and agreements for your partnership.\"\n    },\n    \n    // When user is uncertain\n    uncertainty: {\n      acknowledge: \"It's completely normal to have questions about which structure is right.\",\n      explain: \"The best choice depends on your industry, location, ownership, and long-term goals.\",\n      cta: \"Let's schedule a consultation where we can review your specific situation and make clear recommendations.\"\n    },\n    \n    // When user mentions existing business\n    existingBusiness: {\n      acknowledge: \"Transitioning or restructuring an existing business requires careful review.\",\n      explain: \"We need to understand the current structure, any existing obligations, and your goals.\",\n      cta: \"A consultation will allow us to assess the situation and recommend the right approach.\"\n    },\n    \n    // When user mentions funding/investors\n    funding: {\n      acknowledge: \"Businesses seeking investment have specific structural requirements.\",\n      explain: \"Investors typically require specific entity types and governance structures.\",\n      cta: \"Let's schedule a consultation to discuss your funding strategy and ensure your entity structure supports it.\"\n    },\n    \n    // Generic escalation\n    generic: {\n      acknowledge: \"That's an important consideration.\",\n      explain: \"The answer depends on details specific to your situation.\",\n      cta: \"I can help you prepare for a consultation where we'll review all the relevant factors.\"\n    }\n  }\n} as const;\n\nexport type InternalKB = typeof internalKB;\n","/**\n * Response Templates & CTA Copy\n * All user-facing messages used by the chatbot\n */\n\nexport const messages = {\n  // Welcome messages\n  welcome: {\n    initial: \"I'll ask a few questions to get you set up and schedule your consultation. What brings you here today?\",\n    returning: \"Welcome back! What brings you here today?\"\n  },\n  \n  // Intent-based responses\n  intents: {\n    entityHelp: \"I'll ask a few questions to understand your needs.\",\n    notSure: \"No problem! Let's start with the basics.\",\n    pricing: \"Pricing depends on your specific needs. I'll ask a few questions first.\",\n    consultation: \"I'll collect a few details and get you scheduled.\",\n    generalInfo: \"I'd be happy to explain how we work. What would you like to know?\"\n  },\n  \n  // Progressive questions\n  questions: {\n    businessType: \"What type of business are you setting up? (For example: consulting, e-commerce, restaurant, etc.)\",\n    alreadyOperating: \"Are you already operating, or is this a new business you're planning?\",\n    hasPartners: \"Will you have partners or co-owners?\",\n    location: \"Where will your business be based? (State or city)\",\n    multiState: \"Do you plan to operate in multiple states?\",\n    licensing: \"Does your business require any special licenses or permits?\",\n    missionDriven: \"Is this a for-profit business or a nonprofit/mission-driven organization?\"\n  },\n  \n  // Acknowledgments\n  ack: {\n    understood: \"Got it.\",\n    helpful: \"That's helpful to know.\",\n    important: \"That's an important detail.\",\n    noted: \"Noted.\"\n  },\n  \n  // Escalation messages\n  escalation: {\n    requiresReview: \"This requires a detailed review during a consultation.\",\n    complexity: \"Based on what you've shared, a consultation will ensure we address all the important details.\",\n    stateSpecific: \"State-specific requirements vary, so we'll need to review this during a consultation.\",\n    licensingRequired: \"Licensing requirements are specific to your industry and location. We'll review this in detail during your consultation.\",\n    partnershipNeeded: \"Partnership structures benefit from detailed planning. Let's schedule a consultation to design the right setup.\",\n    multiStateNeeded: \"Multi-state operations require coordinated planning. A consultation will help us map out your expansion strategy.\"\n  },\n  \n  // Summary before escalation\n  summary: {\n    intro: \"Here's what I've gathered so far:\",\n    businessType: \"Business type: {type}\",\n    location: \"Location: {location}\",\n    partners: \"Ownership: {ownership}\",\n    licensing: \"Licensing: {licensing}\",\n    outro: \"A consultation will allow us to review these details and recommend the right structure and approach for your situation.\"\n  },\n  \n  // Lead capture\n  leadCapture: {\n    intro: \"Great! To schedule your consultation, I'll need a few details.\",\n    name: \"What's your name?\",\n    email: \"And what's the best email to reach you?\",\n    phone: \"Would you like to provide a phone number? (Optional)\",\n    confirm: \"Perfect! We'll reach out to {name} at {email} within 24 hours to schedule your consultation.\"\n  },\n  \n  // CTA variants\n  ctas: {\n    scheduleConsultation: \"Schedule your consultation\",\n    learnMore: \"Tell me more\",\n    startOver: \"Start over\",\n    getStarted: \"Get started\"\n  },\n  \n  // Informational responses (from KB-A)\n  info: {\n    whatWeDo: \"We provide comprehensive business development solutions including entity formation, licensing coordination, websites, custom applications, and ongoing compliance support. Everything is coordinated by one expert team.\",\n    whatWeDoNot: \"We don't provide legal advice, tax preparation, or accounting services. We build business infrastructure and coordinate filings, working with the appropriate agencies and professionals when needed.\",\n    timeline: \"Business formation typically takes 24-48 hours once intake information is complete. EIN issuance is often same-day. Website and system development varies by complexity but typically takes 2-4 weeks.\",\n    pricing: \"Pricing is customized based on your specific needs. We'll provide clear pricing and a timeline during your consultation.\",\n    states: \"We serve businesses in all 50 states and coordinate multi-state registrations.\",\n    support: \"We provide ongoing support including compliance monitoring, annual reports, and consultation services.\"\n  },\n  \n  // Entity explanations (simplified from KB-A)\n  entities: {\n    llc: \"An LLC (Limited Liability Company) protects your personal assets by separating business liability from personal liability. It's flexible and suitable for most small to medium businesses.\",\n    corp: \"A corporation provides strong liability protection and can issue stock. It's often used for businesses seeking investors or planning significant growth.\",\n    nonprofit: \"A nonprofit is organized for charitable, educational, or mission-driven purposes. It can apply for tax-exempt status.\"\n  },\n  \n  // Error / fallback messages\n  fallback: {\n    didNotUnderstand: \"I want to make sure I understand correctly. Could you rephrase that?\",\n    outOfScope: \"That's outside what I can help with directly right now.\",\n    generic: \"Let me collect some information and we'll address that during your consultation.\"\n  },\n  \n  // Closing messages\n  closing: {\n    thankYou: \"Thank you for chatting with me!\",\n    followUp: \"Your consultation is confirmed.\",\n    anythingElse: \"Is there anything else I can help you with?\",\n    goodbye: \"Feel free to reach out anytime. Good luck with your business!\"\n  }\n} as const;\n\nexport type Messages = typeof messages;\n","/**\n * Intent Detection\n * Rule-based intent classification (no LLM required)\n */\n\nexport type Intent = \n  | 'ENTITY_HELP'\n  | 'NOT_SURE'\n  | 'PRICING'\n  | 'CONSULTATION'\n  | 'GENERAL_INFO'\n  | 'ENTITY_QUESTION'\n  | 'TIMELINE'\n  | 'SERVICES'\n  | 'UNKNOWN';\n\ninterface IntentPattern {\n  keywords: string[];\n  phrases: string[];\n}\n\nconst intentPatterns: Record<Intent, IntentPattern> = {\n  ENTITY_HELP: {\n    keywords: ['llc', 'corporation', 'corp', 'nonprofit', 'entity', 'form', 'formation', 'structure', 'business type'],\n    phrases: ['start a business', 'start an llc', 'form an llc', 'which entity', 'what structure']\n  },\n  \n  NOT_SURE: {\n    keywords: ['unsure', 'confused', 'help', 'don\\'t know', 'not sure', 'uncertain'],\n    phrases: ['don\\'t know where', 'not sure what', 'help me decide', 'which one', 'what should i']\n  },\n  \n  PRICING: {\n    keywords: ['price', 'cost', 'pricing', 'fee', 'charge', 'expensive', 'cheap', 'affordable', 'how much'],\n    phrases: ['how much does', 'what does it cost', 'what are your prices', 'cost to form']\n  },\n  \n  CONSULTATION: {\n    keywords: ['consult', 'consultation', 'talk', 'speak', 'meet', 'discuss', 'appointment', 'schedule', 'call'],\n    phrases: ['schedule a consultation', 'book a call', 'talk to someone', 'speak with', 'set up a meeting']\n  },\n  \n  GENERAL_INFO: {\n    keywords: ['about', 'who', 'what do you', 'services', 'offer', 'provide', 'help with'],\n    phrases: ['what do you do', 'who are you', 'tell me about', 'what services']\n  },\n  \n  ENTITY_QUESTION: {\n    keywords: ['difference', 'compare', 'versus', 'vs', 'better', 'best'],\n    phrases: ['llc vs', 'corp vs', 'difference between', 'which is better']\n  },\n  \n  TIMELINE: {\n    keywords: ['timeline', 'how long', 'when', 'duration', 'time', 'fast', 'quick'],\n    phrases: ['how long does', 'how fast', 'how quickly', 'timeline to', 'when can i']\n  },\n  \n  SERVICES: {\n    keywords: ['services', 'offer', 'provide', 'do', 'website', 'compliance', 'licensing'],\n    phrases: ['what services', 'what do you offer', 'what can you help', 'do you provide']\n  },\n  \n  UNKNOWN: {\n    keywords: [],\n    phrases: []\n  }\n};\n\n/**\n * Detect intent from user input using rule-based pattern matching\n */\nexport function detectIntent(input: string): Intent {\n  const normalized = input.toLowerCase().trim();\n  \n  // Score each intent\n  const scores: Record<Intent, number> = {\n    ENTITY_HELP: 0,\n    NOT_SURE: 0,\n    PRICING: 0,\n    CONSULTATION: 0,\n    GENERAL_INFO: 0,\n    ENTITY_QUESTION: 0,\n    TIMELINE: 0,\n    SERVICES: 0,\n    UNKNOWN: 0\n  };\n  \n  // Check each intent's patterns\n  for (const [intent, patterns] of Object.entries(intentPatterns)) {\n    if (intent === 'UNKNOWN') continue;\n    \n    // Check keywords\n    for (const keyword of patterns.keywords) {\n      if (normalized.includes(keyword.toLowerCase())) {\n        scores[intent as Intent] += 1;\n      }\n    }\n    \n    // Check phrases (higher weight)\n    for (const phrase of patterns.phrases) {\n      if (normalized.includes(phrase.toLowerCase())) {\n        scores[intent as Intent] += 2;\n      }\n    }\n  }\n  \n  // Find highest scoring intent\n  let maxScore = 0;\n  let detectedIntent: Intent = 'UNKNOWN';\n  \n  for (const [intent, score] of Object.entries(scores)) {\n    if (score > maxScore) {\n      maxScore = score;\n      detectedIntent = intent as Intent;\n    }\n  }\n  \n  // Return detected intent or UNKNOWN if no strong match\n  return maxScore > 0 ? detectedIntent : 'UNKNOWN';\n}\n\n/**\n * Extract business type from user input\n */\nexport function extractBusinessType(input: string): string | null {\n  const normalized = input.toLowerCase().trim();\n  \n  // Common business types\n  const businessTypes = [\n    'consulting', 'consultant', 'coach', 'coaching',\n    'ecommerce', 'e-commerce', 'online store', 'shop',\n    'restaurant', 'cafe', 'coffee shop', 'food',\n    'real estate', 'realtor', 'property',\n    'construction', 'contractor', 'building',\n    'tech', 'software', 'app', 'saas',\n    'marketing', 'agency', 'digital marketing',\n    'healthcare', 'medical', 'clinic', 'practice',\n    'legal', 'law', 'attorney',\n    'accounting', 'bookkeeping', 'tax',\n    'retail', 'store', 'boutique',\n    'service', 'services',\n    'nonprofit', 'charity', 'foundation'\n  ];\n  \n  for (const type of businessTypes) {\n    if (normalized.includes(type)) {\n      return type;\n    }\n  }\n  \n  // If no specific type found, return the full input if it's reasonable\n  if (input.length > 2 && input.length < 100) {\n    return input;\n  }\n  \n  return null;\n}\n\n/**\n * Check if input indicates yes/positive response\n */\nexport function isPositiveResponse(input: string): boolean {\n  const normalized = input.toLowerCase().trim();\n  const positivePatterns = ['yes', 'yep', 'yeah', 'sure', 'ok', 'okay', 'y', 'correct', 'right', 'absolutely'];\n  return positivePatterns.some(pattern => normalized === pattern || normalized.startsWith(pattern));\n}\n\n/**\n * Check if input indicates no/negative response\n */\nexport function isNegativeResponse(input: string): boolean {\n  const normalized = input.toLowerCase().trim();\n  const negativePatterns = ['no', 'nope', 'nah', 'n', 'not', 'don\\'t', 'wrong'];\n  return negativePatterns.some(pattern => normalized === pattern || normalized.startsWith(pattern));\n}\n\n/**\n * Extract location (state or city) from input\n */\nexport function extractLocation(input: string): string | null {\n  const normalized = input.trim();\n  \n  // US State abbreviations and names\n  const states = [\n    'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA',\n    'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD',\n    'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ',\n    'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC',\n    'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY',\n    'Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado',\n    'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho',\n    'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',\n    'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',\n    'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada',\n    'New Hampshire', 'New Jersey', 'New Mexico', 'New York',\n    'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon',\n    'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota',\n    'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington',\n    'West Virginia', 'Wisconsin', 'Wyoming'\n  ];\n  \n  const upperInput = normalized.toUpperCase();\n  \n  // Check for state abbreviation\n  for (const state of states) {\n    if (upperInput.includes(state.toUpperCase())) {\n      return state;\n    }\n  }\n  \n  // Return full input if it seems like a location\n  if (input.length > 2 && input.length < 100) {\n    return input;\n  }\n  \n  return null;\n}\n","/**\n * Gatekeeper Logic\n * Determines when to escalate to consultation vs. continue conversation\n */\n\nimport { internalKB } from '../kb/internal';\nimport { SessionData } from './state';\n\nexport type EscalationType = \n  | 'LICENSED_PROFESSION'\n  | 'MULTI_STATE'\n  | 'TAX_QUESTION'\n  | 'PARTNERSHIP'\n  | 'UNCERTAINTY'\n  | 'EXISTING_BUSINESS'\n  | 'FUNDING'\n  | 'NONPROFIT'\n  | 'GENERIC'\n  | null;\n\ninterface EscalationResult {\n  shouldEscalate: boolean;\n  escalationType: EscalationType;\n  reason?: string;\n}\n\n/**\n * Main gatekeeper function\n * Evaluates if the conversation should escalate to consultation\n */\nexport function evaluateEscalation(\n  userInput: string,\n  sessionData: SessionData\n): EscalationResult {\n  const normalized = userInput.toLowerCase().trim();\n  \n  // Check for licensed profession keywords\n  if (containsAny(normalized, internalKB.escalationTriggers.licensedProfessions)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'LICENSED_PROFESSION',\n      reason: 'User mentioned a licensed profession'\n    };\n  }\n  \n  // Check for multi-state flags\n  if (containsAny(normalized, internalKB.escalationTriggers.multiStateFlags)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'MULTI_STATE',\n      reason: 'User indicated multi-state operations'\n    };\n  }\n  \n  // Check for tax structure questions\n  if (containsAny(normalized, internalKB.escalationTriggers.taxQuestions)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'TAX_QUESTION',\n      reason: 'User asked about tax structure'\n    };\n  }\n  \n  // Check for partnership complexity\n  if (containsAny(normalized, internalKB.escalationTriggers.partnershipFlags)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'PARTNERSHIP',\n      reason: 'User indicated partnership or multiple owners'\n    };\n  }\n  \n  // Check for uncertainty signals\n  if (containsAny(normalized, internalKB.escalationTriggers.uncertaintySignals)) {\n    // Only escalate on uncertainty if we've asked a few questions\n    if (sessionData.conversationHistory.length > 4) {\n      return {\n        shouldEscalate: true,\n        escalationType: 'UNCERTAINTY',\n        reason: 'User expressed uncertainty'\n      };\n    }\n  }\n  \n  // Check for existing business flags\n  if (containsAny(normalized, internalKB.escalationTriggers.existingBusinessFlags)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'EXISTING_BUSINESS',\n      reason: 'User mentioned existing or acquired business'\n    };\n  }\n  \n  // Check for funding/investor flags\n  if (containsAny(normalized, internalKB.escalationTriggers.fundingFlags)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'FUNDING',\n      reason: 'User mentioned investors or funding'\n    };\n  }\n  \n  // Check for nonprofit complexity\n  if (containsAny(normalized, internalKB.escalationTriggers.nonprofitFlags)) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'NONPROFIT',\n      reason: 'User indicated nonprofit formation'\n    };\n  }\n  \n  // Check session data for escalation triggers\n  if (sessionData.hasPartners === true) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'PARTNERSHIP',\n      reason: 'Partnership structure requires consultation'\n    };\n  }\n  \n  if (sessionData.multiState === true) {\n    return {\n      shouldEscalate: true,\n      escalationType: 'MULTI_STATE',\n      reason: 'Multi-state operations require consultation'\n    };\n  }\n  \n  // No escalation needed\n  return {\n    shouldEscalate: false,\n    escalationType: null\n  };\n}\n\n/**\n * Get escalation message based on escalation type\n */\nexport function getEscalationMessage(escalationType: EscalationType): {\n  acknowledge: string;\n  explain: string;\n  cta: string;\n} {\n  const routing = internalKB.escalationRouting;\n  \n  switch (escalationType) {\n    case 'LICENSED_PROFESSION':\n      return routing.licensedProfession;\n    case 'MULTI_STATE':\n      return routing.multiState;\n    case 'TAX_QUESTION':\n      return routing.taxStructure;\n    case 'PARTNERSHIP':\n      return routing.partnership;\n    case 'UNCERTAINTY':\n      return routing.uncertainty;\n    case 'EXISTING_BUSINESS':\n      return routing.existingBusiness;\n    case 'FUNDING':\n      return routing.funding;\n    case 'NONPROFIT':\n      return routing.generic; // Use generic for nonprofit (we can provide some info first)\n    case 'GENERIC':\n    default:\n      return routing.generic;\n  }\n}\n\n/**\n * Check if we should auto-escalate based on conversation progress\n */\nexport function shouldAutoEscalate(sessionData: SessionData): boolean {\n  // After collecting enough information, naturally transition to consultation\n  const hasBusinessType = !!sessionData.businessType;\n  const hasLocation = !!sessionData.location;\n  const hasOwnership = sessionData.hasPartners !== undefined;\n  const hasLicensing = !!sessionData.licensing;\n  \n  // If we have most of the basic info, it's time for consultation\n  const infoCount = [hasBusinessType, hasLocation, hasOwnership, hasLicensing].filter(Boolean).length;\n  \n  return infoCount >= 3;\n}\n\n/**\n * Helper function to check if text contains any of the trigger words/phrases\n */\nfunction containsAny(text: string, triggers: readonly string[]): boolean {\n  return triggers.some(trigger => text.includes(trigger.toLowerCase()));\n}\n\n/**\n * Validate that response is appropriate (not providing restricted advice)\n */\nexport function validateResponse(response: string): {\n  isValid: boolean;\n  reason?: string;\n} {\n  const normalized = response.toLowerCase();\n  \n  // Check for prohibited advice patterns\n  const prohibited = [\n    'you should choose',\n    'you should form',\n    'the best option is',\n    'i recommend',\n    'you need to',\n    'you must',\n    'file as an s-corp',\n    'elect s-corp',\n    'this will save you',\n    'for tax purposes'\n  ];\n  \n  for (const phrase of prohibited) {\n    if (normalized.includes(phrase)) {\n      return {\n        isValid: false,\n        reason: `Response contains prohibited advice: \"${phrase}\"`\n      };\n    }\n  }\n  \n  return { isValid: true };\n}\n\n/**\n * Check if question is answerable from public KB only\n */\nexport function isAnswerableFromPublicKB(input: string): boolean {\n  const normalized = input.toLowerCase();\n  \n  // General informational questions are OK\n  const safePatterns = [\n    'what is',\n    'what do you do',\n    'how long',\n    'what services',\n    'do you provide',\n    'tell me about',\n    'explain'\n  ];\n  \n  // Questions requiring consultation\n  const unsafePatterns = [\n    'which should i',\n    'which is better',\n    'should i choose',\n    'what do you recommend',\n    'in my state',\n    'for my business',\n    'best for me'\n  ];\n  \n  // Check for safe patterns\n  const hasSafePattern = safePatterns.some(pattern => normalized.includes(pattern));\n  \n  // Check for unsafe patterns\n  const hasUnsafePattern = unsafePatterns.some(pattern => normalized.includes(pattern));\n  \n  // Answerable if it has safe patterns and no unsafe patterns\n  return hasSafePattern && !hasUnsafePattern;\n}\n","/**\n * Intake Mode Infrastructure\n * Hard-gated field collection with Golden Frame enforcement\n */\n\nexport type ConversationMode = 'QUALIFICATION' | 'INTAKE_ACTIVE' | 'INTAKE_PAUSED';\n\nexport type FieldStatus = 'unasked' | 'in_progress' | 'completed' | 'skipped';\n\nexport type GoldenFrameId = \n  | 61  // Qualification → Intake Transition\n  | 62; // Client Name Collection\n\nexport interface IntakeModeState {\n  mode: ConversationMode;\n  currentField: string | null;\n  fieldStatusMap: Record<string, FieldStatus>;\n  fieldsCollected: Record<string, any>;\n  userConsent: 'pending' | 'confirmed' | 'declined' | null;\n  transitionTimestamp: number | null;\n  intakeStarted: boolean;\n}\n\nexport interface ConversationMetadata {\n  mode: ConversationMode;\n  frame_id: GoldenFrameId | null;\n  currentField: string | null;\n  fieldStatus: FieldStatus | null;\n  escalation: boolean;\n  toneScore: number | null; // Reserved for future\n  transitionTrigger?: string;\n  userConsent?: 'pending' | 'confirmed' | 'declined';\n}\n\n/**\n * Initialize intake mode state\n */\nexport function initializeIntakeMode(): IntakeModeState {\n  return {\n    mode: 'QUALIFICATION',\n    currentField: null,\n    fieldStatusMap: {},\n    fieldsCollected: {},\n    userConsent: null,\n    transitionTimestamp: null,\n    intakeStarted: false\n  };\n}\n\n/**\n * Transition to Intake Mode (Golden Frame 61)\n * HARD CONSTRAINT: Can only be called after explicit user consent\n */\nexport function transitionToIntake(\n  intakeState: IntakeModeState,\n  userConsented: boolean\n): IntakeModeState {\n  if (!userConsented) {\n    // User declined consent - remain in qualification\n    return {\n      ...intakeState,\n      userConsent: 'declined'\n    };\n  }\n\n  // User confirmed consent - transition to intake\n  // NOTE: currentField will be set to first field immediately by Frame 62\n  return {\n    ...intakeState,\n    mode: 'INTAKE_ACTIVE',\n    userConsent: 'confirmed',\n    transitionTimestamp: Date.now(),\n    intakeStarted: true,\n    currentField: null // Temporary - Frame 62 sets this immediately\n  };\n}\n\n/**\n * HARD CONSTRAINT VALIDATOR: INTAKE_ACTIVE requires currentField\n * Throws if invariant is violated\n */\nexport function validateIntakeState(intakeState: IntakeModeState): void {\n  if (intakeState.mode === 'INTAKE_ACTIVE' && intakeState.currentField === null) {\n    throw new Error(\n      'INVARIANT VIOLATION: INTAKE_ACTIVE mode requires currentField to be set. ' +\n      'State corruption detected. Rolling back to QUALIFICATION.'\n    );\n  }\n}\n\n/**\n * Pause intake mode\n */\nexport function pauseIntake(intakeState: IntakeModeState): IntakeModeState {\n  if (intakeState.mode !== 'INTAKE_ACTIVE') {\n    throw new Error('Cannot pause intake - not in INTAKE_ACTIVE mode');\n  }\n\n  return {\n    ...intakeState,\n    mode: 'INTAKE_PAUSED'\n  };\n}\n\n/**\n * Resume intake mode\n */\nexport function resumeIntake(intakeState: IntakeModeState): IntakeModeState {\n  if (intakeState.mode !== 'INTAKE_PAUSED') {\n    throw new Error('Cannot resume intake - not in INTAKE_PAUSED mode');\n  }\n\n  return {\n    ...intakeState,\n    mode: 'INTAKE_ACTIVE'\n  };\n}\n\n/**\n * Set field status\n */\nexport function setFieldStatus(\n  intakeState: IntakeModeState,\n  fieldName: string,\n  status: FieldStatus\n): IntakeModeState {\n  return {\n    ...intakeState,\n    fieldStatusMap: {\n      ...intakeState.fieldStatusMap,\n      [fieldName]: status\n    }\n  };\n}\n\n/**\n * Set current field\n */\nexport function setCurrentField(\n  intakeState: IntakeModeState,\n  fieldName: string | null\n): IntakeModeState {\n  return {\n    ...intakeState,\n    currentField: fieldName\n  };\n}\n\n/**\n * Store field value\n * HARD CONSTRAINT: Only accepts explicit user input, no speculation\n */\nexport function storeFieldValue(\n  intakeState: IntakeModeState,\n  fieldName: string,\n  value: any\n): IntakeModeState {\n  return {\n    ...intakeState,\n    fieldsCollected: {\n      ...intakeState.fieldsCollected,\n      [fieldName]: value\n    },\n    fieldStatusMap: {\n      ...intakeState.fieldStatusMap,\n      [fieldName]: 'completed'\n    }\n  };\n}\n\n/**\n * Get field value\n */\nexport function getFieldValue(\n  intakeState: IntakeModeState,\n  fieldName: string\n): any {\n  return intakeState.fieldsCollected[fieldName] ?? null;\n}\n\n/**\n * Get field status\n */\nexport function getFieldStatus(\n  intakeState: IntakeModeState,\n  fieldName: string\n): FieldStatus {\n  return intakeState.fieldStatusMap[fieldName] ?? 'unasked';\n}\n\n/**\n * Check if intake mode is active\n */\nexport function isIntakeModeActive(intakeState: IntakeModeState): boolean {\n  return intakeState.mode === 'INTAKE_ACTIVE';\n}\n\n/**\n * Check if user has consented to intake\n */\nexport function hasUserConsented(intakeState: IntakeModeState): boolean {\n  return intakeState.userConsent === 'confirmed';\n}\n\n/**\n * Generate metadata for observability\n * REQUIRED for Shadow AI and Form Stress Test\n */\nexport function generateMetadata(\n  intakeState: IntakeModeState,\n  frameId: GoldenFrameId | null,\n  escalation: boolean = false,\n  businessIntake?: { step: string; data: any }\n): ConversationMetadata {\n  const currentFieldStatus = intakeState.currentField \n    ? getFieldStatus(intakeState, intakeState.currentField)\n    : null;\n\n  return {\n    mode: businessIntake ? 'INTAKE_ACTIVE' as any : intakeState.mode,\n    frame_id: frameId,\n    currentField: businessIntake?.step || intakeState.currentField,\n    fieldStatus: businessIntake ? 'in_progress' as any : currentFieldStatus,\n    escalation,\n    toneScore: null,\n    ...(intakeState.transitionTimestamp && {\n      transitionTrigger: 'Golden Frame 61'\n    }),\n    ...(intakeState.userConsent && {\n      userConsent: intakeState.userConsent\n    })\n  };\n}\n","/**\n * Conversation State Machine\n * Manages progression through conversation states\n */\n\nimport { IntakeModeState, initializeIntakeMode } from './intakeMode';\n\nexport type ConversationState =\n  | 'WELCOME'\n  | 'INTENT_DETECTION'\n  | 'BUSINESS_TYPE'\n  | 'ALREADY_OPERATING'\n  | 'HAS_PARTNERS'\n  | 'LOCATION'\n  | 'MULTI_STATE'\n  | 'LICENSING'\n  | 'MISSION_DRIVEN'\n  | 'SUMMARY'\n  | 'LEAD_CAPTURE_NAME'\n  | 'LEAD_CAPTURE_EMAIL'\n  | 'LEAD_CAPTURE_PHONE'\n  | 'CONFIRMATION'\n  | 'ESCALATION'\n  | 'INFO_PROVIDED'\n  | 'CLOSED'\n  | 'INTAKE_TRANSITION'  // New: Golden Frame 61\n  | 'INTAKE_COLLECTION'; // New: Golden Frame 62\n\n/**\n * Chat Mode - HARD separation between diagnostic and intake\n * DIAGNOSTIC: GPT-driven clarifying questions (default)\n * INTAKE: Golden Frames-driven data collection (explicit consent required)\n */\nexport type ChatMode = 'DIAGNOSTIC' | 'INTAKE';\n\n/**\n * Task Phase - Strict monotonic progression, no regression\n * ORIENT: One-line intro (runs once, never repeats)\n * DISCOVERY: GPT diagnostic (max 3 questions, then force INTAKE)\n * INTAKE: Deterministic consultation questions (no GPT)\n * SCHEDULING: Time slot selection within business hours\n * CONFIRMED: Task complete, input locked, no further execution\n */\nexport type TaskPhase = 'ORIENT' | 'DISCOVERY' | 'INTAKE' | 'SCHEDULING' | 'CONFIRMED' | 'BUSINESS_INTAKE';\n\nexport type IntakeStep =\n  | 'FULL_LEGAL_NAME'\n  | 'PREFERRED_NAME'\n  | 'EMAIL'\n  | 'PHONE'\n  | 'BUSINESS_NAME_CHECK'\n  | 'BUSINESS_NAME_OPTIONS'\n  | 'BUSINESS_TYPE'\n  | 'EIN_STATUS'\n  | 'READINESS'\n  | 'COMPLETED';\n\nexport interface BusinessIntakeData {\n  fullLegalName?: string;\n  preferredName?: string;\n  email?: string;\n  phone?: string;\n  hasBusinessName?: boolean;\n  businessNameOptions?: string[];\n  businessType?: string;\n  hasEIN?: 'Yes' | 'No' | 'Not sure';\n  readiness?: 'Yes' | 'No' | 'Just exploring';\n}\n\nexport interface SessionData {\n  // CRITICAL: New intake flow data\n  businessIntake?: {\n    step: IntakeStep;\n    data: BusinessIntakeData;\n    lastQuestionAsked?: string;\n  };\n\n  // CRITICAL: Chat mode controls frame execution\n  // DIAGNOSTIC (default) = GPT asks questions, NO frames fire\n  // INTAKE = Golden Frames execute, formal data collection\n  mode?: ChatMode;\n  \n  // CRITICAL: Task phase controls conversation lifecycle\n  // CONFIRMED phase blocks ALL further execution\n  phase?: TaskPhase;\n  \n  // Discovery turn counter (max 3 before forcing INTAKE)\n  discoveryTurns?: number;\n  \n  // ORIENT flag (ensures one-time execution)\n  orientCompleted?: boolean;\n  \n  // Consultation data (collected during INTAKE phase)\n  consultation?: {\n    userName?: string;\n    userEmail?: string;\n    userPhone?: string;\n    businessType?: string;\n    businessGoal?: string;\n    preferredDate?: string;  // ISO date string\n    preferredTime?: string;  // HH:MM format\n    scheduledSlot?: string;  // Full ISO timestamp\n    confirmedAt?: number;    // Unix timestamp\n  };\n  \n  // User information\n  name?: string;\n  email?: string;\n  phone?: string;\n  \n  // Business details\n  businessType?: string;\n  isOperating?: boolean;\n  hasPartners?: boolean;\n  location?: string;\n  multiState?: boolean;\n  licensing?: string;\n  missionDriven?: string;\n  \n  // Metadata\n  intent?: string;\n  escalationReason?: string;\n  conversationHistory: Array<{\n    role: 'user' | 'bot';\n    message: string;\n    timestamp: number;\n  }>;\n  \n  // Session control\n  bootstrapCompleted?: boolean; // Golden Frame 00 executed\n  \n  // Intake Mode State\n  intakeMode?: IntakeModeState;\n}\n\nexport interface ConversationStateData {\n  currentState: ConversationState;\n  sessionData: SessionData;\n}\n\n/**\n * Initialize new conversation state\n */\nexport function initializeState(): ConversationStateData {\n  return {\n    currentState: 'WELCOME',\n    sessionData: {\n      conversationHistory: [],\n      intakeMode: initializeIntakeMode(),\n      bootstrapCompleted: false\n    }\n  };\n}\n\n/**\n * Get next state based on current state and user input\n */\nexport function getNextState(\n  currentState: ConversationState,\n  sessionData: SessionData,\n  shouldEscalate: boolean\n): ConversationState {\n  // If escalation is triggered, go to escalation\n  if (shouldEscalate) {\n    return 'ESCALATION';\n  }\n  \n  // State progression logic\n  switch (currentState) {\n    case 'WELCOME':\n      return 'INTENT_DETECTION';\n      \n    case 'INTENT_DETECTION':\n      // Based on intent, determine next step\n      if (sessionData.intent === 'CONSULTATION') {\n        return 'SUMMARY';\n      }\n      if (sessionData.intent === 'PRICING' || sessionData.intent === 'ENTITY_HELP' || sessionData.intent === 'NOT_SURE') {\n        return 'BUSINESS_TYPE';\n      }\n      if (sessionData.intent === 'GENERAL_INFO' || sessionData.intent === 'TIMELINE' || sessionData.intent === 'SERVICES') {\n        return 'INFO_PROVIDED';\n      }\n      return 'BUSINESS_TYPE';\n      \n    case 'BUSINESS_TYPE':\n      return 'ALREADY_OPERATING';\n      \n    case 'ALREADY_OPERATING':\n      return 'HAS_PARTNERS';\n      \n    case 'HAS_PARTNERS':\n      return 'LOCATION';\n      \n    case 'LOCATION':\n      return 'MULTI_STATE';\n      \n    case 'MULTI_STATE':\n      return 'LICENSING';\n      \n    case 'LICENSING':\n      return 'MISSION_DRIVEN';\n      \n    case 'MISSION_DRIVEN':\n      return 'SUMMARY';\n      \n    case 'SUMMARY':\n      return 'LEAD_CAPTURE_NAME';\n      \n    case 'LEAD_CAPTURE_NAME':\n      return 'LEAD_CAPTURE_EMAIL';\n      \n    case 'LEAD_CAPTURE_EMAIL':\n      return 'LEAD_CAPTURE_PHONE';\n      \n    case 'LEAD_CAPTURE_PHONE':\n      return 'CONFIRMATION';\n      \n    case 'ESCALATION':\n      // After escalation explanation, go to lead capture\n      return 'LEAD_CAPTURE_NAME';\n      \n    case 'INFO_PROVIDED':\n      // After providing info, ask if they want to proceed\n      return 'INTENT_DETECTION';\n      \n    case 'CONFIRMATION':\n      return 'CLOSED';\n      \n    case 'CLOSED':\n      return 'CLOSED';\n      \n    default:\n      return currentState;\n  }\n}\n\n/**\n * Check if we have enough data to skip certain questions\n */\nexport function shouldSkipQuestion(\n  state: ConversationState,\n  sessionData: SessionData\n): boolean {\n  switch (state) {\n    case 'BUSINESS_TYPE':\n      return !!sessionData.businessType;\n    case 'LOCATION':\n      return !!sessionData.location;\n    case 'HAS_PARTNERS':\n      return sessionData.hasPartners !== undefined;\n    default:\n      return false;\n  }\n}\n\n/**\n * Check if we have minimum required data for escalation\n */\nexport function hasMinimumDataForEscalation(sessionData: SessionData): boolean {\n  return !!(sessionData.businessType || sessionData.location);\n}\n\n/**\n * Check if lead capture is complete\n */\nexport function isLeadCaptureComplete(sessionData: SessionData): boolean {\n  return !!(sessionData.name && sessionData.email);\n}\n\n/**\n * Save user message to conversation history\n */\nexport function saveUserMessage(\n  sessionData: SessionData,\n  message: string\n): SessionData {\n  return {\n    ...sessionData,\n    conversationHistory: [\n      ...sessionData.conversationHistory,\n      {\n        role: 'user',\n        message,\n        timestamp: Date.now()\n      }\n    ]\n  };\n}\n\n/**\n * Save bot message to conversation history\n */\nexport function saveBotMessage(\n  sessionData: SessionData,\n  message: string\n): SessionData {\n  return {\n    ...sessionData,\n    conversationHistory: [\n      ...sessionData.conversationHistory,\n      {\n        role: 'bot',\n        message,\n        timestamp: Date.now()\n      }\n    ]\n  };\n}\n","/**\n * Smart Input Validation\n * Detects when user input is off-topic, unclear, or needs clarification\n */\n\nexport interface ValidationResult {\n  isValid: boolean;\n  reason?: 'off_topic' | 'unclear' | 'profanity' | 'illegal' | 'greeting' | 'question';\n  suggestedResponse?: string;\n}\n\n/**\n * Check if input is just a greeting\n */\nexport function isGreeting(input: string): boolean {\n  const greetings = ['hi', 'hello', 'hey', 'sup', 'yo', 'greetings', 'howdy'];\n  const lower = input.toLowerCase().trim();\n  return greetings.some(g => lower === g || lower.startsWith(g + ' '));\n}\n\n/**\n * Check if input is profanity or nonsense\n */\nexport function isProfanityOrNonsense(input: string): boolean {\n  const nonsense = ['fart', 'poop', 'butt', 'asdf', 'qwerty', 'test', 'testing'];\n  const lower = input.toLowerCase().trim();\n  return nonsense.some(n => lower.includes(n)) || input.length < 2;\n}\n\n/**\n * Check if user is asking about illegal activities\n */\nexport function isIllegalActivity(input: string): boolean {\n  const illegal = ['weed', 'cannabis', 'marijuana', 'drugs', 'cocaine', 'meth'];\n  const lower = input.toLowerCase();\n  return illegal.some(i => lower.includes(i));\n}\n\n/**\n * Check if user is asking a question instead of answering\n */\nexport function isQuestion(input: string): boolean {\n  const questionWords = ['what', 'how', 'why', 'when', 'where', 'who', 'can you', 'do you'];\n  const lower = input.toLowerCase().trim();\n  return questionWords.some(q => lower.startsWith(q)) || input.trim().endsWith('?');\n}\n\n/**\n * Check if answer is too vague for business type\n */\nexport function isVagueBusinessType(input: string): boolean {\n  const vague = ['business', 'company', 'stuff', 'things', 'idk', 'dunno', 'not sure'];\n  const lower = input.toLowerCase().trim();\n  return vague.some(v => lower === v || lower.includes(v)) && input.length < 20;\n}\n\n/**\n * Validate business type input\n */\nexport function validateBusinessTypeInput(input: string): ValidationResult {\n  if (isGreeting(input)) {\n    return {\n      isValid: false,\n      reason: 'greeting',\n      suggestedResponse: \"Hey! I'm here to help. So, what type of business are you thinking about? (Like consulting, e-commerce, restaurant, etc.)\"\n    };\n  }\n\n  if (isProfanityOrNonsense(input)) {\n    return {\n      isValid: false,\n      reason: 'profanity',\n      suggestedResponse: \"I want to help you, but I need a real answer. What type of business are you looking to start?\"\n    };\n  }\n\n  if (isIllegalActivity(input)) {\n    return {\n      isValid: false,\n      reason: 'illegal',\n      suggestedResponse: \"I can't help with businesses in that industry. We work with legal business formations. If you have a different business idea, I'm here to help!\"\n    };\n  }\n\n  if (isQuestion(input)) {\n    return {\n      isValid: false,\n      reason: 'question',\n      suggestedResponse: \"Good question! Let me answer that first, then we'll continue. What specifically do you want to know?\"\n    };\n  }\n\n  if (isVagueBusinessType(input)) {\n    return {\n      isValid: false,\n      reason: 'unclear',\n      suggestedResponse: \"Can you be more specific? For example: online consulting, e-commerce store, local restaurant, real estate, marketing agency, etc.\"\n    };\n  }\n\n  return { isValid: true };\n}\n\n/**\n * Validate yes/no responses\n */\nexport function validateYesNoInput(input: string): ValidationResult {\n  const lower = input.toLowerCase().trim();\n  const yes = ['yes', 'yeah', 'yep', 'sure', 'yup', 'y'];\n  const no = ['no', 'nope', 'nah', 'n'];\n\n  if (yes.some(y => lower === y || lower.startsWith(y + ' '))) {\n    return { isValid: true };\n  }\n\n  if (no.some(n => lower === n || lower.startsWith(n + ' '))) {\n    return { isValid: true };\n  }\n\n  if (isGreeting(input) || isProfanityOrNonsense(input)) {\n    return {\n      isValid: false,\n      reason: 'unclear',\n      suggestedResponse: \"I need a yes or no. Let me ask again:\"\n    };\n  }\n\n  return {\n    isValid: false,\n    reason: 'unclear',\n    suggestedResponse: \"I didn't catch that. Could you answer with yes or no?\"\n  };\n}\n\n/**\n * Validate location input\n */\nexport function validateLocationInput(input: string): ValidationResult {\n  if (isGreeting(input) || isProfanityOrNonsense(input)) {\n    return {\n      isValid: false,\n      reason: 'unclear',\n      suggestedResponse: \"I need to know where you're located. What state or city?\"\n    };\n  }\n\n  if (input.trim().length < 2) {\n    return {\n      isValid: false,\n      reason: 'unclear',\n      suggestedResponse: \"Can you tell me which state or city?\"\n    };\n  }\n\n  return { isValid: true };\n}\n","/**\n * Question Answering System\n * Detects and answers questions about the business and website\n */\n\ninterface QAResult {\n  isQuestion: boolean;\n  answer?: string;\n  shouldContinueFlow?: boolean;\n}\n\n/**\n * Website navigation questions\n */\nconst navigationQA: Record<string, string> = {\n  'where': 'You can find information throughout the site:\\n• Services page (/services) - All our offerings\\n• Starting a Business (/starting-a-business) - Formation guides\\n• Who We Serve (/who-we-serve) - Client types\\n• Contact (/contact) - Get in touch\\n\\nWhat specifically are you looking for?',\n  \n  'services page': 'The Services page (/services) shows everything we offer: business formation, compliance, websites, custom apps, AI tools, and more. Click \"Services\" in the nav bar!',\n  \n  'contact': 'You can reach us through the Contact page (/contact) or I can help you schedule a consultation right now. Which would you prefer?',\n  \n  'pricing': 'Pricing depends on what you need. For example:\\n• Basic LLC formation starts around $500-1000\\n• Multi-state setup varies by states\\n• Websites and custom apps are quoted based on scope\\n\\nWant to tell me what you need so I can give you a better estimate?'\n};\n\n/**\n * Business formation questions\n */\nconst formationQA: Record<string, string> = {\n  'formation': 'Business formation is the legal process of officially creating your business entity. This includes:\\n• Choosing entity type (LLC, S-Corp, etc.)\\n• Filing paperwork with your state\\n• Getting an EIN from the IRS\\n• Setting up compliance (registered agent, etc.)\\n\\nWe handle all of this. Are you looking to form a new business?',\n  \n  'llc': 'An LLC (Limited Liability Company) protects your personal assets from business debts. It\\'s the most popular choice for small businesses because:\\n• Personal liability protection\\n• Tax flexibility (pass-through or corp taxation)\\n• Less paperwork than a corporation\\n• Works for solo or partners\\n\\nThinking about starting an LLC?',\n  \n  's-corp': 'An S-Corp is a tax election that can save you money on self-employment taxes. You can elect S-Corp status for an LLC or corporation. Good for businesses making $60k+ profit. Want to know if it\\'s right for you?',\n  \n  'ein': 'An EIN (Employer Identification Number) is like a social security number for your business. You need it to:\\n• Open a business bank account\\n• Hire employees\\n• File taxes\\n\\nWe get this for you as part of formation.',\n  \n  'registered agent': 'A registered agent receives legal documents for your business. Required in every state you operate. We provide registered agent service in all 50 states as part of our compliance package.',\n  \n  'compliance': 'Business compliance includes:\\n• Annual reports (varies by state)\\n• Registered agent service\\n• BOI filing (federal requirement)\\n• Maintaining good standing\\n\\nWe handle all of this so you don\\'t have to worry about it.'\n};\n\n/**\n * About the company/service questions\n */\nconst companyQA: Record<string, string> = {\n  'who are you': 'I\\'m the assistant for Innovation Business Development Solutions. We\\'re a national business infrastructure firm - we handle formation, compliance, websites, custom apps, AI tools, and everything else you need to run and scale a business. Think of us as your operational backbone.',\n  \n  'what do you do': 'We provide complete business infrastructure:\\n• Formation: LLCs, S-Corps, multi-state registration\\n• Compliance: Registered agents, annual reports, BOI filing\\n• Digital: Websites, custom applications, AI integration\\n• Infrastructure: Email systems, domains, tech stack\\n\\nEverything coordinated by one team. What interests you?',\n  \n  'custom app': 'We build custom business applications tailored to your needs:\\n• Internal tools and dashboards\\n• Customer portals\\n• Automation and workflows\\n• API integrations\\n• AI-powered features\\n\\nThese replace expensive SaaS tools with exactly what you need. What kind of app are you thinking about?',\n  \n  'website': 'We build professional business websites:\\n• Custom design (not templates)\\n• Mobile-responsive\\n• SEO optimized\\n• Fast and secure\\n• Connected to your business systems\\n\\nDomain, hosting, and maintenance included. Need a new site or redesign?',\n  \n  'ai tool': 'We integrate AI into your business:\\n• Custom chatbots (like me!)\\n• Document processing\\n• Data analysis\\n• Workflow automation\\n• Customer service tools\\n\\nWe build AI that actually solves problems. Interested?',\n  \n  'how does this work': 'Super simple:\\n1. Tell me what you need (or I\\'ll ask questions to figure it out)\\n2. We give you a clear plan and pricing\\n3. We handle everything - formation, tech, compliance\\n4. You focus on your business, we handle the infrastructure\\n\\nWant to get started?',\n  \n  'recreate': 'Want to build a chat system like me? We build custom AI assistants and automation for businesses. This includes:\\n• Custom chatbots for your site\\n• AI-powered workflows\\n• Integration with your systems\\n\\nInterested in discussing a custom AI solution?'\n};\n\n/**\n * Detect and answer questions\n */\nexport function detectAndAnswerQuestion(userInput: string): QAResult {\n  const lower = userInput.toLowerCase().trim();\n  \n  // Normalize variations (u -> you, etc)\n  const normalized = lower\n    .replace(/\\bu\\b/g, 'you')\n    .replace(/\\bur\\b/g, 'your')\n    .replace(/\\br\\b/g, 'are');\n  \n  // Check if it's a question\n  const questionMarkers = ['what', 'how', 'why', 'when', 'where', 'who', 'can you', 'do you', 'tell me', 'explain'];\n  const isQuestion = questionMarkers.some(q => normalized.startsWith(q)) || normalized.includes('?');\n  \n  if (!isQuestion) {\n    return { isQuestion: false };\n  }\n  \n  // Check website navigation questions\n  for (const [keyword, answer] of Object.entries(navigationQA)) {\n    if (normalized.includes(keyword)) {\n      return {\n        isQuestion: true,\n        answer,\n        shouldContinueFlow: true\n      };\n    }\n  }\n  \n  // Check formation questions\n  for (const [keyword, answer] of Object.entries(formationQA)) {\n    if (normalized.includes(keyword)) {\n      return {\n        isQuestion: true,\n        answer,\n        shouldContinueFlow: true\n      };\n    }\n  }\n  \n  // Check company/service questions\n  for (const [keyword, answer] of Object.entries(companyQA)) {\n    if (normalized.includes(keyword)) {\n      return {\n        isQuestion: true,\n        answer,\n        shouldContinueFlow: true\n      };\n    }\n  }\n  \n  // Generic question we can't answer specifically\n  if (isQuestion) {\n    return {\n      isQuestion: true,\n      answer: \"Good question! I can help with business formation, compliance, websites, and custom apps. What specifically would you like to know?\",\n      shouldContinueFlow: false\n    };\n  }\n  \n  return { isQuestion: false };\n}\n","/**\n * Flow Router\n * Routes user through conversation based on state and input\n */\n\nimport { messages } from '../copy/messages';\nimport { publicKB } from '../kb/public';\nimport {\n  detectIntent,\n  extractBusinessType,\n  extractLocation,\n  isPositiveResponse,\n  isNegativeResponse\n} from './intents';\nimport {\n  ConversationState,\n  SessionData,\n  getNextState,\n  saveUserMessage,\n  saveBotMessage,\n  shouldSkipQuestion,\n  hasMinimumDataForEscalation\n} from './state';\nimport { initializeIntakeMode } from './intakeMode';\nimport {\n  evaluateEscalation,\n  getEscalationMessage,\n  shouldAutoEscalate,\n  EscalationType\n} from './gatekeeper';\nimport {\n  validateBusinessTypeInput,\n  validateYesNoInput,\n  validateLocationInput\n} from './smartValidation';\nimport { detectAndAnswerQuestion } from './questionAnswering';\n\nexport interface ChatResponse {\n  message: string;\n  nextState: ConversationState;\n  sessionData: SessionData;\n  options?: string[];\n  requiresInput?: boolean;\n  showCTA?: boolean;\n  ctaText?: string;\n  ctaAction?: string;\n}\n\n/**\n * Main routing function\n * Processes user input and determines next response\n */\nexport function routeConversation(\n  userInput: string,\n  currentState: ConversationState,\n  sessionData: SessionData\n): ChatResponse {\n  // Save user message to history\n  sessionData = saveUserMessage(sessionData, userInput);\n  \n  // Check if user is asking a question (but DON'T answer yet - let Golden Frames handle it)\n  const qaResult = detectAndAnswerQuestion(userInput);\n  \n  // Only answer questions if we're in INFO_PROVIDED state (not in active flow)\n  if (qaResult.isQuestion && qaResult.answer && currentState === 'INFO_PROVIDED') {\n    return {\n      message: qaResult.answer,\n      nextState: currentState,\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  // For all other states, let Golden Frames and qualification flow handle it\n  // Evaluate if we should escalate\n  const escalationResult = evaluateEscalation(userInput, sessionData);\n  \n  // Check for auto-escalation based on collected data\n  const autoEscalate = shouldAutoEscalate(sessionData);\n  \n  const shouldEscalate = escalationResult.shouldEscalate || autoEscalate;\n  \n  // Route based on current state\n  let response: ChatResponse;\n  \n  switch (currentState) {\n    case 'WELCOME':\n      response = handleWelcome(userInput, sessionData);\n      break;\n      \n    case 'INTENT_DETECTION':\n      response = handleIntentDetection(userInput, sessionData);\n      break;\n      \n    case 'BUSINESS_TYPE':\n      response = handleBusinessType(userInput, sessionData);\n      break;\n      \n    case 'ALREADY_OPERATING':\n      response = handleAlreadyOperating(userInput, sessionData);\n      break;\n      \n    case 'HAS_PARTNERS':\n      response = handleHasPartners(userInput, sessionData);\n      break;\n      \n    case 'LOCATION':\n      response = handleLocation(userInput, sessionData);\n      break;\n      \n    case 'MULTI_STATE':\n      response = handleMultiState(userInput, sessionData);\n      break;\n      \n    case 'LICENSING':\n      response = handleLicensing(userInput, sessionData);\n      break;\n      \n    case 'MISSION_DRIVEN':\n      response = handleMissionDriven(userInput, sessionData);\n      break;\n      \n    case 'SUMMARY':\n      response = handleSummary(sessionData);\n      break;\n      \n    case 'LEAD_CAPTURE_NAME':\n      response = handleLeadCaptureName(userInput, sessionData);\n      break;\n      \n    case 'LEAD_CAPTURE_EMAIL':\n      response = handleLeadCaptureEmail(userInput, sessionData);\n      break;\n      \n    case 'LEAD_CAPTURE_PHONE':\n      response = handleLeadCapturePhone(userInput, sessionData);\n      break;\n      \n    case 'ESCALATION':\n      response = handleEscalation(escalationResult.escalationType, sessionData);\n      break;\n      \n    case 'INFO_PROVIDED':\n      response = handleInfoProvided(userInput, sessionData);\n      break;\n      \n    case 'CONFIRMATION':\n      response = handleConfirmation(sessionData);\n      break;\n      \n    default:\n      response = {\n        message: messages.fallback.generic,\n        nextState: 'SUMMARY',\n        sessionData,\n        requiresInput: true\n      };\n  }\n  \n  // If escalation is triggered, override next state\n  if (shouldEscalate && currentState !== 'ESCALATION' && currentState !== 'SUMMARY') {\n    const escalationType = escalationResult.escalationType || 'GENERIC';\n    sessionData.escalationReason = escalationResult.reason;\n    return handleEscalation(escalationType, sessionData);\n  }\n  \n  // Save bot response to history\n  response.sessionData = saveBotMessage(response.sessionData, response.message);\n  \n  return response;\n}\n\nfunction handleWelcome(userInput: string, sessionData: SessionData): ChatResponse {\n  const intent = detectIntent(userInput);\n  sessionData.intent = intent;\n  \n  // If user already stated intent, acknowledge and move forward\n  if (intent === 'ENTITY_HELP' || userInput.toLowerCase().includes('llc') || userInput.toLowerCase().includes('business')) {\n    return {\n      message: \"Perfect! Let me help you with that. To point you in the right direction, what type of business are you setting up? (For example: consulting, e-commerce, restaurant, etc.)\",\n      nextState: 'BUSINESS_TYPE',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  return {\n    message: messages.welcome.initial,\n    nextState: 'INTENT_DETECTION',\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleIntentDetection(userInput: string, sessionData: SessionData): ChatResponse {\n  const intent = detectIntent(userInput);\n  sessionData.intent = intent;\n  \n  let message = '';\n  let nextState: ConversationState = 'BUSINESS_TYPE';\n  \n  // Check if user mentioned wanting to start/open LLC/business\n  const lowerInput = userInput.toLowerCase();\n  if (lowerInput.includes('llc') || lowerInput.includes('start') || lowerInput.includes('open') || lowerInput.includes('form')) {\n    message = \"Got it! To help you with LLC formation, what type of business are you setting up? (For example: consulting, e-commerce, restaurant, etc.)\";\n    nextState = 'BUSINESS_TYPE';\n    return {\n      message,\n      nextState,\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  switch (intent) {\n    case 'ENTITY_HELP':\n      message = messages.intents.entityHelp;\n      nextState = 'BUSINESS_TYPE';\n      break;\n    case 'NOT_SURE':\n      message = messages.intents.notSure;\n      nextState = 'BUSINESS_TYPE';\n      break;\n    case 'PRICING':\n      message = messages.intents.pricing;\n      nextState = 'BUSINESS_TYPE';\n      break;\n    case 'CONSULTATION':\n      message = messages.intents.consultation;\n      nextState = 'SUMMARY';\n      break;\n    case 'GENERAL_INFO':\n      message = messages.info.whatWeDo + '\\n\\n' + messages.closing.anythingElse;\n      nextState = 'INFO_PROVIDED';\n      break;\n    case 'TIMELINE':\n      message = messages.info.timeline + '\\n\\n' + messages.closing.anythingElse;\n      nextState = 'INFO_PROVIDED';\n      break;\n    case 'SERVICES':\n      message = messages.info.whatWeDo + '\\n\\n' + messages.closing.anythingElse;\n      nextState = 'INFO_PROVIDED';\n      break;\n    default:\n      message = messages.intents.notSure;\n      nextState = 'BUSINESS_TYPE';\n  }\n  \n  return {\n    message,\n    nextState,\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleBusinessType(userInput: string, sessionData: SessionData): ChatResponse {\n  // Validate input first\n  const validation = validateBusinessTypeInput(userInput);\n  \n  if (!validation.isValid) {\n    return {\n      message: validation.suggestedResponse!,\n      nextState: 'BUSINESS_TYPE',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  // Input is valid, extract business type\n  const businessType = extractBusinessType(userInput);\n  if (businessType) {\n    sessionData.businessType = businessType;\n  }\n  \n  const nextMessage = messages.ack.helpful + ' ' + messages.questions.alreadyOperating;\n  \n  return {\n    message: nextMessage,\n    nextState: getNextState('BUSINESS_TYPE', sessionData, false),\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleAlreadyOperating(userInput: string, sessionData: SessionData): ChatResponse {\n  if (isPositiveResponse(userInput)) {\n    sessionData.isOperating = true;\n  } else if (isNegativeResponse(userInput)) {\n    sessionData.isOperating = false;\n  }\n  \n  const nextMessage = messages.questions.hasPartners;\n  \n  return {\n    message: nextMessage,\n    nextState: getNextState('ALREADY_OPERATING', sessionData, false),\n    sessionData,\n    requiresInput: true,\n    options: ['Yes', 'No']\n  };\n}\n\nfunction handleHasPartners(userInput: string, sessionData: SessionData): ChatResponse {\n  // Validate yes/no response\n  const validation = validateYesNoInput(userInput);\n  \n  if (!validation.isValid) {\n    return {\n      message: validation.suggestedResponse! + ' ' + messages.questions.hasPartners,\n      nextState: 'HAS_PARTNERS',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  if (isPositiveResponse(userInput)) {\n    sessionData.hasPartners = true;\n  } else if (isNegativeResponse(userInput)) {\n    sessionData.hasPartners = false;\n  }\n  \n  const nextMessage = messages.questions.location;\n  \n  return {\n    message: nextMessage,\n    nextState: getNextState('HAS_PARTNERS', sessionData, false),\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleLocation(userInput: string, sessionData: SessionData): ChatResponse {\n  // Validate location input\n  const validation = validateLocationInput(userInput);\n  \n  if (!validation.isValid) {\n    return {\n      message: validation.suggestedResponse!,\n      nextState: 'LOCATION',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  const location = extractLocation(userInput);\n  if (location) {\n    sessionData.location = location;\n  }\n  \n  const nextMessage = messages.ack.noted + ' ' + messages.questions.multiState;\n  \n  return {\n    message: nextMessage,\n    nextState: getNextState('LOCATION', sessionData, false),\n    sessionData,\n    requiresInput: true,\n    options: ['Yes', 'No']\n  };\n}\n\nfunction handleMultiState(userInput: string, sessionData: SessionData): ChatResponse {\n  if (isPositiveResponse(userInput)) {\n    sessionData.multiState = true;\n  } else if (isNegativeResponse(userInput)) {\n    sessionData.multiState = false;\n  }\n  \n  const nextMessage = messages.questions.licensing;\n  \n  return {\n    message: nextMessage,\n    nextState: getNextState('MULTI_STATE', sessionData, false),\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleLicensing(userInput: string, sessionData: SessionData): ChatResponse {\n  sessionData.licensing = userInput;\n  \n  const nextMessage = messages.ack.understood + ' ' + messages.questions.missionDriven;\n  \n  return {\n    message: nextMessage,\n    nextState: getNextState('LICENSING', sessionData, false),\n    sessionData,\n    requiresInput: true,\n    options: ['For-profit', 'Nonprofit']\n  };\n}\n\nfunction handleMissionDriven(userInput: string, sessionData: SessionData): ChatResponse {\n  sessionData.missionDriven = userInput;\n  \n  // Now we have enough info, go to summary\n  return {\n    message: messages.ack.helpful,\n    nextState: getNextState('MISSION_DRIVEN', sessionData, false),\n    sessionData,\n    requiresInput: false\n  };\n}\n\nfunction handleSummary(sessionData: SessionData): ChatResponse {\n  const summaryParts: string[] = [messages.summary.intro];\n  \n  if (sessionData.businessType) {\n    summaryParts.push(messages.summary.businessType.replace('{type}', sessionData.businessType));\n  }\n  if (sessionData.location) {\n    summaryParts.push(messages.summary.location.replace('{location}', sessionData.location));\n  }\n  if (sessionData.hasPartners !== undefined) {\n    const ownership = sessionData.hasPartners ? 'Multiple owners' : 'Single owner';\n    summaryParts.push(messages.summary.partners.replace('{ownership}', ownership));\n  }\n  if (sessionData.licensing) {\n    summaryParts.push(messages.summary.licensing.replace('{licensing}', sessionData.licensing));\n  }\n  \n  summaryParts.push('');\n  summaryParts.push(messages.summary.outro);\n  \n  const summaryMessage = summaryParts.join('\\n');\n  \n  return {\n    message: summaryMessage,\n    nextState: getNextState('SUMMARY', sessionData, false),\n    sessionData,\n    requiresInput: true,\n    showCTA: true,\n    ctaText: messages.ctas.scheduleConsultation,\n    ctaAction: 'PROCEED_TO_LEAD_CAPTURE'\n  };\n}\n\nfunction handleLeadCaptureName(userInput: string, sessionData: SessionData): ChatResponse {\n  if (!sessionData.name) {\n    // First time asking for name\n    return {\n      message: messages.leadCapture.name,\n      nextState: 'LEAD_CAPTURE_NAME',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  // User provided name\n  sessionData.name = userInput.trim();\n  \n  return {\n    message: messages.leadCapture.email,\n    nextState: getNextState('LEAD_CAPTURE_NAME', sessionData, false),\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleLeadCaptureEmail(userInput: string, sessionData: SessionData): ChatResponse {\n  // Basic email validation\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailRegex.test(userInput.trim())) {\n    return {\n      message: \"Please provide a valid email address.\",\n      nextState: 'LEAD_CAPTURE_EMAIL',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  sessionData.email = userInput.trim();\n  \n  return {\n    message: messages.leadCapture.phone,\n    nextState: getNextState('LEAD_CAPTURE_EMAIL', sessionData, false),\n    sessionData,\n    requiresInput: true,\n    options: ['Skip']\n  };\n}\n\nfunction handleLeadCapturePhone(userInput: string, sessionData: SessionData): ChatResponse {\n  const normalized = userInput.toLowerCase().trim();\n  \n  if (normalized !== 'skip' && userInput.trim().length > 0) {\n    sessionData.phone = userInput.trim();\n  }\n  \n  const confirmMessage = messages.leadCapture.confirm\n    .replace('{name}', sessionData.name || 'there')\n    .replace('{email}', sessionData.email || 'your email');\n  \n  return {\n    message: confirmMessage,\n    nextState: getNextState('LEAD_CAPTURE_PHONE', sessionData, false),\n    sessionData,\n    requiresInput: false\n  };\n}\n\nfunction handleEscalation(escalationType: EscalationType, sessionData: SessionData): ChatResponse {\n  const escalationMsg = getEscalationMessage(escalationType);\n  \n  const fullMessage = `${escalationMsg.acknowledge}\\n\\n${escalationMsg.explain}\\n\\n${escalationMsg.cta}`;\n  \n  return {\n    message: fullMessage,\n    nextState: 'SUMMARY',\n    sessionData,\n    requiresInput: true,\n    showCTA: true,\n    ctaText: messages.ctas.scheduleConsultation,\n    ctaAction: 'PROCEED_TO_LEAD_CAPTURE'\n  };\n}\n\nfunction handleInfoProvided(userInput: string, sessionData: SessionData): ChatResponse {\n  const intent = detectIntent(userInput);\n  \n  if (intent === 'CONSULTATION' || isPositiveResponse(userInput)) {\n    return {\n      message: messages.intents.consultation,\n      nextState: 'SUMMARY',\n      sessionData,\n      requiresInput: true\n    };\n  }\n  \n  // Continue conversation\n  return {\n    message: messages.intents.notSure,\n    nextState: 'BUSINESS_TYPE',\n    sessionData,\n    requiresInput: true\n  };\n}\n\nfunction handleConfirmation(sessionData: SessionData): ChatResponse {\n  return {\n    message: messages.closing.thankYou + '\\n\\n' + messages.closing.followUp,\n    nextState: 'CLOSED',\n    sessionData,\n    requiresInput: false,\n    showCTA: false\n  };\n}\n\n/**\n * Get initial welcome message\n */\nexport function getWelcomeMessage(): ChatResponse {\n  const sessionData: SessionData = {\n    conversationHistory: [],\n    intakeMode: initializeIntakeMode()\n  };\n  \n  return {\n    message: messages.welcome.initial,\n    nextState: 'INTENT_DETECTION',\n    sessionData,\n    requiresInput: true\n  };\n}\n"],"names":["LinkComponent","useLinkStatus","isModifiedEvent","event","eventTarget","currentTarget","target","getAttribute","metaKey","ctrlKey","shiftKey","altKey","nativeEvent","which","linkClicked","e","href","as","linkInstanceRef","replace","scroll","onNavigate","window","nodeName","isAnchorNodeName","toUpperCase","hasAttribute","isLocalURL","preventDefault","location","isDefaultPrevented","dispatchNavigateAction","require","React","startTransition","current","formatStringOrUrl","urlObjOrString","formatUrl","props","linkStatus","setOptimisticLinkStatus","useOptimistic","IDLE_LINK_STATUS","children","useRef","hrefProp","asProp","childrenProp","prefetch","prefetchProp","passHref","shallow","onClick","onMouseEnter","onMouseEnterProp","onTouchStart","onTouchStartProp","legacyBehavior","ref","forwardedRef","unstable_dynamicOnHover","restProps","a","router","useContext","AppRouterContext","prefetchEnabled","fetchStrategy","getFetchStrategyFromPrefetchProp","FetchStrategy","PPR","process","env","NODE_ENV","createPropError","args","Error","key","expected","actual","requiredPropsGuard","requiredProps","Object","keys","forEach","_","optionalPropsGuard","optionalProps","valType","locale","warnOnce","pathname","hasDynamicSegment","split","some","segment","startsWith","endsWith","useMemo","resolvedHref","child","$$typeof","Symbol","for","console","warn","Children","only","err","type","childRef","observeLinkVisibilityOnMount","useCallback","element","mountLinkInstance","unmountLinkForCurrentNavigation","unmountPrefetchableInstance","mergedRef","useMergedRef","childProps","defaultPrevented","upgradeToDynamicPrefetch","onNavigationIntent","__NEXT_LINK_NO_TOUCH_START","undefined","isAbsoluteUrl","addBasePath","link","errorOnce","cloneElement","LinkStatusContext","Provider","value","createContext","__NEXT_CACHE_COMPONENTS","Full","isLegacyBehavior","childIsHostComponent","childIsClientComponent","error","ClientLinkComponent"],"mappings":"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","ignoreList":[0,1,2,3,5,6,7,8,9,10,11]}